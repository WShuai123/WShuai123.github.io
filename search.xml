<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Butterfly博客配置美化记录</title>
      <link href="/2022/12/14/Butterfly%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE/"/>
      <url>/2022/12/14/Butterfly%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="页面样式调节">页面样式调节</h2><p>通过css样式调节各个页面透明度、模糊度（亚克力效果）、圆角、边框样式等，看起来会更加舒适。</p><ol><li>复制以下代码进去自定义的<code>custom.css</code>文件。如果没有，就在<strong>主题配置文件</strong>的<code>/source/css</code>目录下新建<code>custom.css</code>文件，文件中写入以下代码：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--trans-light</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--trans-dark</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--border-style</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">  <span class="attr">--backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章页、归档页、普通页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航栏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式遮罩 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#archive</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式页脚页头遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 阅读模式 */</span></span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式下的阅读模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>参数说明</li></ol><ul><li><code>--trans-light</code>：白天模式带透明度的背景色，如<code>rgba(255, 255, 255, 0.88)</code>底色是纯白色，其中0.88就透明度，在0-1之间调节，值越大越不透明；</li><li><code>--trans-dark</code>: 夜间模式带透明度的背景色，如<code>rgba(25, 25, 25, 0.88)</code>底色是柔和黑色，其中0.88就透明度，在0-1之间调节，值越大越不透明;</li><li><code>--border-style</code>: 边框样式，<code>1px solid rgb(169, 169, 169)</code>指宽度为1px的灰色实体边框;</li><li><code>--backdrop-filter</code>: 背景过滤器，如<code>blur(5px) saturate(150%)</code>表示饱和度为150%的、高斯模糊半径为5px的过滤器，这是亚克力效果的一种实现方法;</li><li>可以根据自己的喜好进行调节。</li></ul><ol start="3"><li><strong>主题配置文件</strong><code>_config.yml</code>的<code>inject</code>配置项中引入该css文件。即把第三行添加到主题配置文件的inject中：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span> </span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>##　文章双侧栏显示</p><ol><li>在博客根目录下打开终端，输入以下指令，安装插件：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-butterfly-article-double-row --save</span><br></pre></td></tr></table></figure><ol start="2"><li>在<strong>网站配置文件</strong><code>_config.yml</code>新增以下项：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">butterfly_article_double_row:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="3"><li>在主题文件夹下的<code>/source/css/custom.css</code>文件添加以下代码。没有该文件的自己建一个。如果是新建的文件，别忘了在站点配置文件中引入该css文件。方法见上一节的第三部分。</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 翻页按钮居中 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>hexo命令</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo c</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><h2 id="一图流">一图流</h2><p>顶图、页脚图、背景图完全使用一张图。</p><ol><li>打开主题文件的<code>source/css</code>文件夹下的<code>custom.css</code>，如果没有该文件就新建一个，文件中加入以下代码：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 页脚与头图透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 白天模式遮罩透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>在主题配置文件的<code>yml</code>文件中的<code>inject</code>配置项的<code>head</code>子项中引入该文件：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>更改主题配置文件<code>_config.butterfly.yml</code>文件中的<code>index_img</code>和<code>footer_bg</code>配置取消头图和页脚图的加载项。</li></ol><p>取消头图和页脚图的加载项后，默认的桌面头图和页脚图就会使用主题配置文件中的<code># Website Background</code>中的<code>background:</code>设置的图片</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The banner image of home page</span></span><br><span class="line"><span class="attr">index_img:</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Footer Background</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="文章双侧栏显示">文章双侧栏显示</h2><ol><li>博客根目录打开终端，安装插件:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-butterfly-article-double-row --save</span><br></pre></td></tr></table></figure><p>2.<strong>网站配置文件</strong><code>_config.yml</code>增加以下代码：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">butterfly_article_double_row:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="3"><li>为了避免在文章数量为奇数时,翻页按钮错位的问题，打开主题文件中的<code>source/css</code>文件夹下的<code>custom.css</code>，如果没有该文件就新建一个,在文件中加入以下代码。(如果是新建的，别忘了在主题配置文件中引入该css文件)</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 翻页按钮居中 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="个人卡片渐变色">个人卡片渐变色</h2><ol><li>打开主题文件中的<code>source/css</code>文件夹下的<code>custom.css</code>，如果没有该文件就新建一个,在文件中加入以下代码:</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 侧边栏个人信息卡片动态渐变色 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    -<span class="number">45deg</span>,</span><br><span class="line">    <span class="number">#e8d8b9</span>,</span><br><span class="line">    <span class="number">#eccec5</span>,</span><br><span class="line">    <span class="number">#a3e9eb</span>,</span><br><span class="line">    <span class="number">#bdbdf0</span>,</span><br><span class="line">    <span class="number">#eec1ea</span></span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgb</span>(<span class="number">66</span>, <span class="number">68</span>, <span class="number">68</span>);</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  -moz-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  <span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑夜模式适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#191919ee</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 个人信息Follow me按钮 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &gt; <span class="selector-id">#card-info-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3eb8be</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>如果是新建css文件的，别忘了在主题配置文件中引入该css文件。</li></ol><h2 id="文章置顶">文章置顶</h2><p>插件<code>hexo-generator-index</code>已经支持文章置顶功能，可以直接在文章的<code>front-matter</code>区域添加<code>sticky: 1</code>属性来把这篇文章置顶。数值越大，置顶的优先级越大。</p><h2 id="豆瓣插件">豆瓣插件</h2><ol><li>安装<code>hexo-butterfly-douban</code>插件。推荐使用<code>butterfly</code>主题的安装这个定制插件，因为可以适配<code>meta</code>, <code>top_img</code>, <code>comments</code> 和 <code>aside</code>。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-douban --save</span><br></pre></td></tr></table></figure><ol start="2"><li>打开<strong>站点配置文件</strong><code>_config.yml</code>,写入以下内容：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">douban:</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">mythsman</span></span><br><span class="line">  <span class="attr">builtin:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">book:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;This is my book title&#x27;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&#x27;This is my book quote&#x27;</span></span><br><span class="line">    <span class="attr">meta:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">top_img:</span> <span class="string">https://cccccc.png</span></span><br><span class="line">    <span class="attr">aside:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">books</span></span><br><span class="line">    <span class="attr">limit:</span></span><br><span class="line">  <span class="attr">movie:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;This is my movie title&#x27;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&#x27;This is my movie quote&#x27;</span></span><br><span class="line">    <span class="attr">meta:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">top_img:</span> <span class="string">https://cccccc.png</span></span><br><span class="line">    <span class="attr">aside:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">movies</span></span><br><span class="line">    <span class="attr">limit:</span></span><br><span class="line">  <span class="attr">game:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;This is my game title&#x27;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&#x27;This is my game quote&#x27;</span></span><br><span class="line">    <span class="attr">meta:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">top_img:</span> <span class="string">https://cccccc.png</span></span><br><span class="line">    <span class="attr">aside:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">games</span></span><br><span class="line">    <span class="attr">limit:</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">10000</span> </span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">参数释义:</summary><div class="toggle-content"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">解释</th></tr></thead><tbody><tr><td style="text-align:center">user</td><td style="text-align:center">你的豆瓣ID.打开豆瓣，登录账号，然后在右上角点击“个人主页” ，此时地址栏的URL大致是这样的：&quot; <a href="https://www.douban.com/people/xxxxxx/">https://www.douban.com/people/xxxxxx/</a> &quot; ，其中的“xxxxxx”就是你的个人ID了</td></tr><tr><td style="text-align:center">builtin</td><td style="text-align:center">是不是将生成页面的功能填入hexo s和hexo g中，默认是false，另外一项可选项为true(1.xx版新增加配置项)</td></tr><tr><td style="text-align:center">title</td><td style="text-align:center">该页的标题</td></tr><tr><td style="text-align:center">quote</td><td style="text-align:center">写在页面开头的一段话，支持 html 语言法。</td></tr><tr><td style="text-align:center">timeout</td><td style="text-align:center">【可选】刷取数据的超时时间，默认为10000ms，如果在使用时发现超时的错误(ETIMEOUT)可以把这个数据设置的大一点</td></tr><tr><td style="text-align:center">meta</td><td style="text-align:center">【任选】插入<meta name="referrer" content="no-referrer">到页面，可以解决部分浏览器无法显示豆瓣图片的问题（会导致一些插件出错，例如不豌豆计算器。）</td></tr><tr><td style="text-align:center">comments</td><td style="text-align:center">【任选】是否显示评论</td></tr><tr><td style="text-align:center">top_img</td><td style="text-align:center">【任选】是否显示顶部图</td></tr><tr><td style="text-align:center">aside</td><td style="text-align:center">【任选】是否显示侧面栏</td></tr><tr><td style="text-align:center">path</td><td style="text-align:center">可选】生成的网址;movie页面默认为<code>//yourblog/movies</code>;book页面默认为 <code>//yourblog/books</code>;game页面默认为<code>//yourblog/games</code></td></tr><tr><td style="text-align:center">limit</td><td style="text-align:center">【任选】限制删除的页数</td></tr></tbody></table></div></details><h2 id="文章加密">文章加密</h2><p>实现对文章加密的功能,也支持按标签加密。</p><div class="tabs" id="jiami"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#jiami-1">插件安装</button></li><li class="tab"><button type="button" data-href="#jiami-2">基础用法</button></li><li class="tab"><button type="button" data-href="#jiami-3">进阶用法</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="jiami-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="jiami-2"><p>将 “password” 字段添加到您文章信息头:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2016-03-30 21:18:02</span><br><span class="line"><span class="section">password: hello</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="jiami-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">-</span> 作为日记加密</span><br><span class="line">date: 2016-03-30 21:12:21</span><br><span class="line">password: mikemessi</span><br><span class="line">abstract: 有东西被加密了, 请输入密码查看.</span><br><span class="line">message: 您好, 这里需要密码.</span><br><span class="line">theme: xray</span><br><span class="line">wrong<span class="emphasis">_pass_</span>message: 抱歉, 这个密码看着不太对, 请再试试.</span><br><span class="line"><span class="section">wrong<span class="emphasis">_hash_</span>message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>其余使用方法详见官方GitHub仓库:<a href="https://github.com/D0n9X1n/hexo-blog-encrypt/blob/master/ReadMe.zh.md">https://github.com/D0n9X1n/hexo-blog-encrypt/blob/master/ReadMe.zh.md</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="外挂标签">外挂标签</h2><ol><li>安装插件。在博客文件根目录下打开终端，输入以下命令：</li><li></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-tag-plugins-plus --save</span><br></pre></td></tr></table></figure><ol><li>原来的markdown渲染器对外挂标签语法兼容性差，因此将其卸载，替换为新的。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure><ol start="3"><li>添加配置信息，在站点配置文件或者主题配置文件里加入以下代码：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tag-plugins-plus</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/615e2dec/</span></span><br><span class="line"><span class="attr">tag_plugins:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">issues:</span> <span class="literal">false</span> <span class="comment">#issues标签依赖注入开关</span></span><br><span class="line">  <span class="attr">link:</span></span><br><span class="line">    <span class="attr">placeholder:</span> <span class="string">/img/link.png</span> <span class="comment">#link_card标签默认的图标图片</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br><span class="line">    <span class="attr">anima:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css</span> <span class="comment">#动画标签anima的依赖</span></span><br><span class="line">    <span class="attr">jquery:</span> <span class="string">https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js</span> <span class="comment">#issues标签依赖</span></span><br><span class="line">    <span class="attr">issues:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/issues.js</span> <span class="comment">#issues标签依赖</span></span><br><span class="line">    <span class="attr">iconfont:</span> <span class="string">//at.alicdn.com/t/font_2032782_8d5kxvn09md.js</span> <span class="comment">#参看https://akilar.top/posts/d2ebecef/</span></span><br><span class="line">    <span class="attr">carousel:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js</span></span><br><span class="line">    <span class="attr">tag_plugins_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css</span></span><br></pre></td></tr></table></figure><ol start="4"><li>参数释义</li></ol><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">备选值/类型</th><th style="text-align:left">释义</th></tr></thead><tbody><tr><td style="text-align:center">enable</td><td style="text-align:center">true/false</td><td style="text-align:left">【必选】控制开关</td></tr><tr><td style="text-align:center">priority</td><td style="text-align:center">number</td><td style="text-align:left">【可选】过滤器优先级，数值越小，执行越早，默认为10，选填</td></tr><tr><td style="text-align:center">issues</td><td style="text-align:center">true/false</td><td style="text-align:left">【可选】issues标签控制开关，默认为false</td></tr><tr><td style="text-align:center">link.placeholder</td><td style="text-align:center">【必选】link卡片外挂标签的默认图标</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">CDN.anima</td><td style="text-align:center">URL</td><td style="text-align:left">【可选】动画标签anima的依赖</td></tr><tr><td style="text-align:center">CDN.jquery</td><td style="text-align:center">URL</td><td style="text-align:left">【可选】issues标签依赖</td></tr><tr><td style="text-align:center">CDN.issues</td><td style="text-align:center">URL</td><td style="text-align:left">【可选】issues标签依赖</td></tr><tr><td style="text-align:center">CDN.iconfont</td><td style="text-align:center">URL</td><td style="text-align:left">【可选】iconfont标签symbol样式引入，如果不想引入，则设为false</td></tr><tr><td style="text-align:center">CDN.carousel</td><td style="text-align:center">URL</td><td style="text-align:left">【可选】carousel旋转相册标签鼠标拖动依赖，如果不想引入则设为false</td></tr><tr><td style="text-align:center">CDN.tag_plugins_css</td><td style="text-align:center">URL</td><td style="text-align:left">【可选】外挂标签样式的CSS依赖，为避免CDN缓存延迟，建议将@latest改为具体版本号</td></tr></tbody></table><h3 id="分栏-Tabs">分栏 Tabs</h3><p>这里只介绍自定义Tab名 + 只有icon + icon和Tab名的方法，也是我们最常用的方法。其余方法详见：<a href="https://butterfly.js.org/posts/4aa8abbe/#Tabs">Tabs</a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test %&#125;</span><br><span class="line">&lt;!-- tab 第一个Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字为第一个Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有图标 没有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>渲染效果:</p><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">第一個Tab</button></li><li class="tab"><button type="button" data-href="#test-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test-3"><i class="fas fa-bomb"></i>炸彈</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><strong>tab名字為第一個Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p><strong>只有圖標 沒有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="Note-Bootstrap-Callout">Note (Bootstrap Callout)</h3><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">用法1</button></li><li class="tab"><button type="button" data-href="#-2">用法2(自定义icon)</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>参数释义：</p><table><thead><tr><th style="text-align:center">名称</th><th style="text-align:left">用法</th></tr></thead><tbody><tr><td style="text-align:center">class</td><td style="text-align:left">【可选】标识，不同的标识有不同的配色<br/>（ default / primary / success / info / warning / danger ）</td></tr><tr><td style="text-align:center">no-icon</td><td style="text-align:left">【可选】不显示 icon</td></tr><tr><td style="text-align:center">style</td><td style="text-align:left">【可选】可以覆盖配置中的 style<br/>（simple/modern/flat/disabled）</td></tr></tbody></table><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;</span><br><span class="line">默认 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;</span><br><span class="line">default 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;</span><br><span class="line">primary 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;</span><br><span class="line">success 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;</span><br><span class="line">info 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;</span><br><span class="line">warning 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;</span><br><span class="line">danger 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note simple"><p>默认 提示块标签</p></div><div class="note default simple"><p>default 提示块标签</p></div><div class="note primary simple"><p>primary 提示块标签</p></div><div class="note success simple"><p>success 提示块标签</p></div><div class="note info simple"><p>info 提示块标签</p></div><div class="note warning simple"><p>warning 提示块标签</p></div><div class="note danger simple"><p>danger 提示块标签</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>参数释义：</p><table><thead><tr><th style="text-align:center">名称</th><th style="text-align:center">用法</th></tr></thead><tbody><tr><td style="text-align:center">color</td><td style="text-align:center">【可选】顔色<br/>(default / blue / pink / red / purple / orange / green)</td></tr><tr><td style="text-align:center">icon</td><td style="text-align:center">【可选】可配置自定义 icon (只支持 fontawesome 图标, 也可以配置 no-icon )</td></tr><tr><td style="text-align:center">style</td><td style="text-align:center">【可选】可以覆盖配置中的 style<br/>（simple/modern/flat/disabled）</td></tr></tbody></table><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 还是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;</span><br><span class="line">小心开车 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;</span><br><span class="line">这是三片呢？还是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 还是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;</span><br><span class="line">剪刀石头布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;</span><br><span class="line">前端最讨厌的浏览器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="tag-hide">tag-hide</h3><div class="note warning simple"><p>请注意，tag-hide内不建议有文章标题。因为目录会把隐藏内容标题页显示出来。而且当滚动屏幕时，如果隐藏内容没有显示出来，会导致目录的滚动出现异常。</p></div><p>如果你想把一些文字、内容隐藏起来，并提供按钮让用户点击显示。可以使用这个标签外挂。</p><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">Inline</button></li><li class="tab"><button type="button" data-href="#test-2">Block</button></li><li class="tab"><button type="button" data-href="#test-3">Toggle</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><code>inline</code>在文本里面添加按钮隐藏内容，只限文字</p><p>(content不能包含英文逗号，可用<code>\&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideInline content,display,bg,color %&#125;</span><br></pre></td></tr></table></figure><ul><li><p>content: 文本内容</p></li><li><p>display: 按钮显示的文字(可选)</p></li><li><p>bg: 按钮的背景颜色(可选)</p></li><li><p>color: 按钮文字的颜色(可选)</p></li></ul><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">哪个英文字母最酷？ &#123;% hideInline 因为西装裤(C装酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">门里站着一个人? &#123;% hideInline 闪 %&#125;</span><br></pre></td></tr></table></figure><p>哪个英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案<br></button><span class="hide-content">因为西装裤(C装酷)</span></span></p><p>门里站着一个人? <span class="hide-inline"><button type="button" class="hide-button" style="">Click<br></button><span class="hide-content">闪</span></span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p><code>block</code>独立的block隐藏内容，可以隐藏很多内容，包括图片，代码块等等</p><p>( display 不能包含英文逗号，可用<code>\&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: 文本内容</li><li>display: 按钮显示的文字(可选)</li><li>bg: 按钮的背景颜色(可选)</li><li>color: 按钮文字的颜色(可选)</li></ul><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查看答案</span><br><span class="line">&#123;% hideBlock 查看答案 %&#125;</span><br><span class="line">傻子，怎么可能有答案</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><p>查看答案</p><div class="hide-block"><button type="button" class="hide-button" style="">查看答案    </button><div class="hide-content"><p>傻子，怎么可能有答案</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p>如果你需要展示的内容太多，可以把它隐藏在收缩框里，需要时再把它展开。</p><p>( display 不能包含英文逗号，可用 <code>\&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideToggle display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideToggle Butterfly安装方法 %&#125;</span><br><span class="line">在你的博客根目录里</span><br><span class="line"></span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">如果想要安装比较新的dev分支，可以</span><br><span class="line"></span><br><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">Butterfly安装方法</summary><div class="toggle-content"><p>在你的博客根目录里</p><p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p><p>如果想要安装比较新的dev分支，可以</p><p>git clone -b dev <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p></div></details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="label">label</h3><p>文字高亮。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">解释</th></tr></thead><tbody><tr><td style="text-align:center">text</td><td style="text-align:center">文字</td></tr><tr><td style="text-align:center">color</td><td style="text-align:center">【可选】背景颜色:default/blue/pink/red/purple/orange/green</td></tr></tbody></table><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">宫中、府中，俱为一体；陟罚臧否，不宜异同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</span><br></pre></td></tr></table></figure><p>臣亮言：<mark class="hl-label default">先帝</mark> 创业未半，而<mark class="hl-label blue">中道崩殂</mark> 。今天下三分，<mark class="hl-label pink">益州疲敝</mark> ，此诚<mark class="hl-label red">危急存亡之秋</mark> 也！然侍衞之臣，不懈于内；<mark class="hl-label purple">忠志之士</mark> ，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。<br>宫中、府中，俱为一体；陟罚臧否，不宜异同。若有<mark class="hl-label orange">作奸</mark> 、<mark class="hl-label green">犯科</mark> ，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</p><h3 id="时间轴-timeline">时间轴 timeline</h3><p>时间线。用法：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline title,color %&#125;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p>参数释义：</p><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>title</td><td>标题/时间线</td></tr><tr><td>color</td><td>timeline 颜色<br/>default(留空) / blue / pink / red / purple / orange / green</td></tr></tbody></table><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022 %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-02</p></div></div><div class='timeline-item-content'><p>这是测试页面</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-06</p></div></div><div class='timeline-item-content'><p>这是测试页面2</p></div></div></div><h3 id="行内文本样式-text">行内文本样式 text</h3><div class="tabs" id="hangnei"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#hangnei-1">标签语法</button></li><li class="tab"><button type="button" data-href="#hangnei-2">样式预览</button></li><li class="tab"><button type="button" data-href="#hangnei-3">示例源码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="hangnei-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u 文本内容 %&#125;</span><br><span class="line">&#123;% emp 文本内容 %&#125;</span><br><span class="line">&#123;% wavy 文本内容 %&#125;</span><br><span class="line">&#123;% del 文本内容 %&#125;</span><br><span class="line">&#123;% kbd 文本内容 %&#125;</span><br><span class="line">&#123;% psw 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="hangnei-2"><ul><li>带 <u>下划线</u> 的文本</li><li>带 <emp>着重号</emp> 的文本</li><li>带 <wavy>波浪线</wavy> 的文本</li><li>带 <del>删除线</del> 的文本</li><li>键盘样式的文本 <kbd>command</kbd> + <kbd>D</kbd></li><li>密码样式的文本：<psw>这里没有验证码</psw></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="hangnei-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">带 &#123;% u 下划线 %&#125; 的文本</span><br><span class="line">带 &#123;% emp 着重号 %&#125; 的文本</span><br><span class="line">带 &#123;% wavy 波浪线 %&#125; 的文本</span><br><span class="line">带 &#123;% del 删除线 %&#125; 的文本</span><br><span class="line">键盘样式的文本 &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line">密码样式的文本：&#123;% psw 这里没有验证码 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="行内文本-span">行内文本 span</h3><div class="tabs" id="span"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#span-1">标签语法</button></li><li class="tab"><button type="button" data-href="#span-2">配置参数</button></li><li class="tab"><button type="button" data-href="#span-3">示例源码</button></li><li class="tab"><button type="button" data-href="#span-4">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="span-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="span-2"><ul><li>字体: logo, code</li><li>颜色:red,yellow,green,cyan,blue,gray</li><li>大小: small, h4, h3, h2, h1, large, huge, ultra</li><li>对齐方向: left, center, right</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="span-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">在一段话中方便插入各种颜色的标签，包括：&#123;% span red, 红色 %&#125;、&#123;% span yellow, 黄色 %&#125;、&#123;% span green, 绿色 %&#125;、&#123;% span cyan, 青色 %&#125;、&#123;% span blue, 蓝色 %&#125;、&#123;% span gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">&#123;% span center large, Butterfly %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="span-4"><ul><li>彩色文字:<br>在一段话中方便插入各种颜色的标签，包括：<span class='p red'>红色</span>、<span class='p yellow'>黄色</span>、<span class='p green'>绿色</span>、<span class='p cyan'>青色</span>、<span class='p blue'>蓝色</span>、<span class='p gray'>灰色</span>。</li><li>超大号文字:<br>文档「开始」页面中的标题部分就是超大号文字。<br><span class='p center large'>Butterfly</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="侧边栏电子时钟">侧边栏电子时钟</h2><ol><li>安装新版电子钟插件<code>hexo-butterfly-clock</code>。如果安装了旧版的hexo-butterfly-clock插件,npm命令卸载，再安装新版的：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-clock-anzhiyu --save</span><br></pre></td></tr></table></figure><ol><li>在站点配置文件<code>_config.yml</code>或主题配置文件中添加配置信息：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">electric_clock:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="comment"># - /posts/</span></span><br><span class="line">    <span class="comment"># - /about/</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">class</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">sticky_layout</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">loading:</span> <span class="string">https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif</span> <span class="comment">#加载动画自定义</span></span><br><span class="line">  <span class="attr">clock_css:</span> <span class="string">https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css</span></span><br><span class="line">  <span class="attr">clock_js:</span> <span class="string">https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js</span></span><br><span class="line">  <span class="attr">ip_api:</span> <span class="string">https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0</span></span><br><span class="line">  <span class="comment"># 和风天气key 默认是 b16a1fa0e63c46a4b8f28abfb06ae3fe</span></span><br><span class="line">  <span class="attr">qweather_key:</span> <span class="comment"># 你的key</span></span><br><span class="line">  <span class="comment"># 高得地图web服务key 默认为 e2b04289e870b005374ee030148d64fd&amp;s=rsv3</span></span><br><span class="line">  <span class="attr">gaud_map_key:</span> <span class="comment"># 你的key</span></span><br><span class="line">  <span class="attr">default_rectangle:</span> <span class="literal">false</span> <span class="comment"># 开启后将一直显示rectangle位置的天气，否则将获取访问者的地理位置与天气</span></span><br><span class="line">  <span class="attr">rectangle:</span> <span class="number">112.982279</span><span class="string">,28.19409</span> <span class="comment"># 获取访问者位置失败时会显示该位置的天气，同时该位置为开启default_rectangle后的位置</span></span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">参数释义:</summary><div class="toggle-content"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">备选值/类型</th><th style="text-align:center">释义</th></tr></thead><tbody><tr><td style="text-align:center">priority</td><td style="text-align:center">priority</td><td style="text-align:center">【可选】过滤器优先级，数值越小，执行越早，默认为 10，选填</td></tr><tr><td style="text-align:center">enable</td><td style="text-align:center">true/false</td><td style="text-align:center">【必选】控制开关</td></tr><tr><td style="text-align:center">enable_page</td><td style="text-align:center">path/all</td><td style="text-align:center">【可选】填写想要应用的页面的相对路径（即路由地址）,如根目录就填’/‘,分类页面就填’/categories/‘。若要应用于所有页面，就填’all’，默认为 all</td></tr><tr><td style="text-align:center">exclude</td><td style="text-align:center">path</td><td style="text-align:center">【可选】填写想要屏蔽的页面，可以多个。写法见示例。原理是将屏蔽项的内容逐个放到当前路径去匹配，若当前路径包含任一屏蔽项，则不会挂载。</td></tr><tr><td style="text-align:center">layout.type</td><td style="text-align:center">id/class</td><td style="text-align:center">【可选】挂载容器类型，填写 id 或 class，不填则默认为 id</td></tr><tr><td style="text-align:center"><a href="http://layout.name">layout.name</a></td><td style="text-align:center">text</td><td style="text-align:center">【必选】挂载容器名称</td></tr><tr><td style="text-align:center">layout.index</td><td style="text-align:center">0 和正整数</td><td style="text-align:center">【可选】前提是 layout.type 为 class，因为同一页面可能有多个 class，此项用来确认究竟排在第几个顺位</td></tr><tr><td style="text-align:center">loading</td><td style="text-align:center">URL</td><td style="text-align:center">【可选】电子钟加载动画的图片</td></tr><tr><td style="text-align:center">clock_css</td><td style="text-align:center">URL</td><td style="text-align:center">【可选】电子钟样式 CDN 资源</td></tr><tr><td style="text-align:center">clock_js</td><td style="text-align:center">URL</td><td style="text-align:center">【可选】电子钟执行脚本 CDN 资源</td></tr><tr><td style="text-align:center">ip_api</td><td style="text-align:center">URL</td><td style="text-align:center">【可选】获取时钟 IP 的 API</td></tr><tr><td style="text-align:center">qweather_key</td><td style="text-align:center">text</td><td style="text-align:center">【可选】和风天气 key</td></tr><tr><td style="text-align:center">gaud_map_key</td><td style="text-align:center">text</td><td style="text-align:center">【可选】高德地图 web 服务 key</td></tr><tr><td style="text-align:center">default_rectangle</td><td style="text-align:center">text</td><td style="text-align:center">【可选】开启后将一直显示 rectangle 位置的天气，否则将获取访问者的地理位置与天气</td></tr><tr><td style="text-align:center">rectangle</td><td style="text-align:center">text</td><td style="text-align:center">【可选】获取访问者位置失败时会显示该位置的天气，同时该位置为开启 default_rectangle 后的位置</td></tr></tbody></table></div></details><h2 id="站点地图-sitemap-生成与使用">站点地图 sitemap 生成与使用</h2><div class="tabs" id="sitmap"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#sitmap-1">插件安装</button></li><li class="tab"><button type="button" data-href="#sitmap-2">生成站点地图</button></li><li class="tab"><button type="button" data-href="#sitmap-3">配置Google Search Console</button></li><li class="tab"><button type="button" data-href="#sitmap-4">配置百度站长平台</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="sitmap-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save <span class="comment"># google站点地图生成</span></span><br><span class="line">npm install hexo-generator-baidu-sitemap --save <span class="comment"># 百度站点地图生成</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sitmap-2"><ul><li><strong>站点配置</strong>文件<code>_config.yml</code>中加入以下代码,生成名为sitemap.xml的谷歌站点地图和名为baidusitemap.xml的百度站点地图</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure><ul><li>hexo clean &amp; hexo generate,生成sitemap。能在博客根目录的public文件夹中找到站点地图的文件。</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sitmap-3"><ul><li>打开<a href="https://search.google.com/search-console/welcome">Google Search Console</a>网站</li><li>在<code>网址前缀</code>输入你的博客地址。例如，我的就是：<a href="https://www.wshuai.xyz/">https://www.wshuai.xyz/</a></li><li>验证所有权建议使用第二种：<strong>HTML标记</strong></li><li>复制HTML标记方法里谷歌提供的代码的<strong>最后的双引号</strong>部分</li><li>打开博客的<strong>主题配置</strong>文件<code>_config.butterfly.yml</code></li><li>将刚刚复制的代码粘贴到<code>site_verification</code>中的 <code>google_site_verification</code>的<code>content</code>后面</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">site_verification:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">google-site-verification</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">**********</span> <span class="comment"># 粘贴到这里</span></span><br></pre></td></tr></table></figure><ul><li>hexo命令将博客更新到GitHub。</li><li>回到<a href="https://search.google.com/search-console/welcome">Google Search Console</a>，点击验证，即可验证成功。</li><li>打开<a href="https://search.google.com/search-console/welcome">Google Search Console</a>,点击索引里的站点地图，输入<code>sitemap.xml</code>,即生成的站点地图的名称，点击提交。<br><strong>注意</strong>：若您的博客未使用自定义域名可能会导致提交失败，建议博客使用自定义域名。</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sitmap-4"><ul><li>与谷歌的配置方法相似，<a href="https://ziyuan.baidu.com/dashboard/">百度站长平台</a> ,同样使用<strong>HTML标记</strong>方法验证。同样需要复制到<strong>主题配置</strong>文件，</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">site_verification:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">baidu-site-verification</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">************</span> <span class="comment"># 粘贴到这里</span></span><br></pre></td></tr></table></figure><ul><li>hexo命令将博客上传到GitHub，在百度站长平台验证。</li><li>打开百度站长平台，点击资源提交的普通收录，选择sitmap</li><li>填写数据文件地址，例如：<a href="https://www.wshuai.xyz/baidusitemap.xml">https://www.wshuai.xyz/baidusitemap.xml</a> ,即自己的域名后加xml名称，检查无误后点击提交</li><li>提交后下方会显示文件名称，状态为等待。等待几天百度就会进行提取。</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="百度主动推送">百度主动推送</h2><p>百度sitemap收录很慢，所以使用主动推送可以使博客在向GitHub推送的同时也向百度推送，使百度更快的收录。</p><div class="tabs" id="submitter"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#submitter-1">安装插件</button></li><li class="tab"><button type="button" data-href="#submitter-2">配置</button></li><li class="tab"><button type="button" data-href="#submitter-3">配置成功</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="submitter-1"><p>博客根目录，打开终端，输入以下命令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="submitter-2"><ul><li>打开<strong>站点配置</strong>文件<code>_config.yml</code>,添加以下代码：</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_url_submit:</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">10</span>                       <span class="comment">## 提交最新的5个链接</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">https://www.wshuai.xyz/</span>     <span class="comment">## 百度站长平台中注册的域名</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">****************</span>           <span class="comment">## 准入秘钥</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidu_urls.txt</span>              <span class="comment">## 文本文档的地址， 新链接会保存在此文本文档里</span></span><br></pre></td></tr></table></figure><p>准入密钥在<a href="https://ziyuan.baidu.com/dashboard">百度站长平台</a>中获取。进入站长平台，点击左侧的普通收录，选择API提交。token就是百度提供的接口调用地址的最后一部分。<br><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/20221217225649.png" alt=""></p><ul><li>打开<strong>站点配置</strong>文件<code>_config.yml</code>，在<code>deploy:</code>中加入百度推送：</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/WShuai123/wshuai123.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">baidu_url_submitter</span> <span class="comment"># 添加这一行</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="submitter-3"><p>配置成功后，博客根目录执行hexo c &amp; hexo g &amp; hexo d,推送博客文件<br>当显示<code>INFO  Deploy done: baidu_url_submitter</code>时表示推送成功。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="参考资料">参考资料:</h2><ul><li><p><a href="https://www.fomal.cc/">https://www.fomal.cc/</a></p></li><li><p><a href="https://tzy1997.com/">https://tzy1997.com/</a></p></li><li><p><a href="https://gukaifeng.cn/">https://gukaifeng.cn/</a></p></li><li><p><a href="https://anzhiy.cn/">https://anzhiy.cn/</a></p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MathJax</title>
      <link href="/2022/12/13/MathJax/"/>
      <url>/2022/12/13/MathJax/</url>
      
        <content type="html"><![CDATA[<h2 id="上下标">上下标</h2><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>x</mi><mi>i</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">x_i^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0728em;vertical-align:-0.2587em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4413em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span></span></span></span></span></span></span></span></span></span> =</p>]]></content>
      
      
      
        <tags>
            
            <tag> MathJax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>混淆矩阵与评估指标</title>
      <link href="/2022/12/03/%E6%B7%B7%E6%B7%86%E7%9F%A9%E9%98%B5/"/>
      <url>/2022/12/03/%E6%B7%B7%E6%B7%86%E7%9F%A9%E9%98%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="概念">概念</h2><p>混淆矩阵(Confusion Matrix)又称为可能性表格或是错误矩阵。它是一种特定的矩阵用来呈现算法性能的可视化效果，通常是监督学习（非监督学习，通常用匹配矩阵：matching matrix）。其每一列代表预测值，每一行代表的是实际的类别。这个名字来源于它可以非常容易的表明多个类别是否有混淆（也就是一个class被预测成另一个class）。</p><h2 id="基本格式">基本格式</h2><p>二分类混淆矩阵：</p><table><thead><tr><th></th><th style="text-align:center">预测为正</th><th style="text-align:center">预测为反</th></tr></thead><tbody><tr><td>真实为正</td><td style="text-align:center">√(True Positive)</td><td style="text-align:center">❌(False Negative)</td></tr><tr><td>真实为反</td><td style="text-align:center">❌(False Positive)</td><td style="text-align:center">√(True Negative)</td></tr></tbody></table><p>√：表示正确分类</p><p>❌：表示错误分类</p><ul><li>TP ：True Positive，真正，即被模型预测为正的正样本</li><li>FN ：False Negative，假负，即被预测为负的正样本</li><li>FP ：False Positive，假正，即被预测为正的负样本</li><li>TN ：True Negative，真负，即被预测为负的负样本</li></ul><p>我们希望的是TP和TN越大越好，FN和FP越小越好</p><h2 id="评估指标及公式">评估指标及公式</h2><p>TP+FN为真实为正例的样本；FP+TN为真实为反例的样本；</p><p>TP+TN为预测正确的样本</p><ul><li>Accuracy = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mtext>正确分类样本数</mtext><mtext>所有样本数</mtext></mfrac></mrow><annotation encoding="application/x-tex">\frac{正确分类样本数}{所有样本数}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">所有样本数</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">正确分类样本数</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi><mo>+</mo><mi>F</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{TP+TN}{TP+TN+FP+FN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2757em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">TN</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">FP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">FN</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">TN</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>　　准确率，模型正确分类样本数占总样本数的比例(所有类别)</li><li>Precision = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mtext>正确分类为正例</mtext><mtext>预测为正例的样本数</mtext></mfrac></mrow><annotation encoding="application/x-tex">\frac{正确分类为正例}{预测为正例的样本数}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">预测为正例的样本数</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">正确分类为正例</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>P</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{TP}{TP+FP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2757em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">FP</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>   查准率(精确率)，预测为正例的数据中有多少是真的正例</li><li>Recall = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mtext>正确分类为正例</mtext><mtext>真实为正例样本数</mtext></mfrac></mrow><annotation encoding="application/x-tex">\frac{正确分类为正例}{真实为正例样本数}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">真实为正例样本数</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">正确分类为正例</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{TP}{TP+FN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2757em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">FN</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>  召回率，查全率，敏感性(Sensitivity)，，真实为正例的数据中多少被预测出来了</li><li>F<sub>1</sub>score = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>2</mn><mrow><mfrac><mn>1</mn><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac><mo>+</mo><mfrac><mn>1</mn><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow></mfrac></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2}{\frac{1}{Precision}+\frac{1}{Recall}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4869em;vertical-align:-0.6418em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.599em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">ll</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6418em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>2</mn><mo>×</mo><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>×</mo><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>+</mo><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2 \times Precision\times Recall}{Precision+Recall}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">ll</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">ll</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 　F~1~  score是Precision和Recall的调和平均数，综合反映分类器的Precision和Recall</li><li>Specificity = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>T</mi><mi>N</mi></mrow><mtext>真实为健康的样本数</mtext></mfrac></mrow><annotation encoding="application/x-tex">\frac{TN}{真实为健康的样本数}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">真实为健康的样本数</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">TN</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>T</mi><mi>N</mi></mrow><mrow><mi>F</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{TN}{FP+TN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2757em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">FP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">TN</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">TN</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>　　特异性</li><li>ROC曲线，受试者工作特性曲线。横坐标为FPR，纵坐标为TPR。<ul><li>FPR=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>F</mi><mi>P</mi></mrow><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{FP}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">FP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>F</mi><mi>P</mi></mrow><mrow><mi>F</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{FP}{FP+TN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2757em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">FP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">TN</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">FP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>负正类率 = 1-特异性</li><li>TPR＝<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mi>P</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{TP}{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{TP}{TP+FN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2757em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">FN</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>真正类率 = 召回率</li></ul></li></ul><p>注：其中准确率是针对所有类别;精确率，召回率，特异度是针对每个类别进行统计。</p><h2 id="计算例题">计算例题</h2><table><thead><tr><th>n=100</th><th style="text-align:center">预测为患病</th><th style="text-align:center">预测为健康</th></tr></thead><tbody><tr><td>患病</td><td style="text-align:center">45</td><td style="text-align:center">5</td></tr><tr><td>健康</td><td style="text-align:center">15</td><td style="text-align:center">35</td></tr></tbody></table><p>TP = 45，FN=5，FP=15,TN=35</p><ul><li>Precision = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>45</mn><mrow><mn>45</mn><mo>+</mo><mn>15</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{45}{45+15}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">45</span><span class="mbin mtight">+</span><span class="mord mtight">15</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">45</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.75　　查准率</li><li>Recall = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>45</mn><mrow><mn>45</mn><mo>+</mo><mn>5</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{45}{45+5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">45</span><span class="mbin mtight">+</span><span class="mord mtight">5</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">45</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.9　　　　查全率，敏感性，召回率</li><li>F1-score = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>2</mn><mo>×</mo><mn>0.75</mn><mo>×</mo><mn>0.9</mn></mrow><mrow><mn>0.75</mn><mo>+</mo><mn>0.9</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2\times0.75\times0.9}{0.75+0.9}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0.75</span><span class="mbin mtight">+</span><span class="mord mtight">0.9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">×</span><span class="mord mtight">0.75</span><span class="mbin mtight">×</span><span class="mord mtight">0.9</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.82　调和平均数</li><li>Accuracy = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>45</mn><mo>+</mo><mn>35</mn></mrow><mn>100</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{45+35}{100}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">100</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">45</span><span class="mbin mtight">+</span><span class="mord mtight">35</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> x 100%= 80%　准确率</li><li>Specificity = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>35</mn><mrow><mn>15</mn><mo>+</mo><mn>35</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{35}{15+35}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span><span class="mbin mtight">+</span><span class="mord mtight">35</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">35</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.7　　　特异性</li></ul><p>对于现在正在做的医疗领域相关的项目，我们更希望真实为患病预测为健康的这个值小。</p><h2 id="多分类混淆矩阵-Multiclass-Classifiers-Confusion-Matrix">多分类混淆矩阵(Multiclass Classifiers Confusion Matrix)</h2><p>基本结构与二分类相似。与二分类不同的是，每一类都可以计算查准率和召回率。</p><p>例：</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">预测为猫</th><th style="text-align:center">预测为狗</th><th style="text-align:center">预测为猪</th></tr></thead><tbody><tr><td style="text-align:center">真实为猫</td><td style="text-align:center">15</td><td style="text-align:center">2</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">真实为狗</td><td style="text-align:center">6</td><td style="text-align:center">12</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">真实为猪</td><td style="text-align:center">0</td><td style="text-align:center">4</td><td style="text-align:center">22</td></tr></tbody></table><ul><li>Accuracy = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>15</mn><mo>+</mo><mn>12</mn><mo>+</mo><mn>22</mn></mrow><mrow><mn>15</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mn>6</mn><mo>+</mo><mn>12</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>22</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{15+12+22}{15+2+3+6+12+4+22}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span><span class="mbin mtight">+</span><span class="mord mtight">2</span><span class="mbin mtight">+</span><span class="mord mtight">3</span><span class="mbin mtight">+</span><span class="mord mtight">6</span><span class="mbin mtight">+</span><span class="mord mtight">12</span><span class="mbin mtight">+</span><span class="mord mtight">4</span><span class="mbin mtight">+</span><span class="mord mtight">22</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span><span class="mbin mtight">+</span><span class="mord mtight">12</span><span class="mbin mtight">+</span><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 76.56%</li><li>猫：Precision = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>15</mn><mrow><mn>15</mn><mo>+</mo><mn>6</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{15}{15+6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span><span class="mbin mtight">+</span><span class="mord mtight">6</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.71</li></ul><p>Recall = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>15</mn><mrow><mn>15</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{15}{15+2+3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span><span class="mbin mtight">+</span><span class="mord mtight">2</span><span class="mbin mtight">+</span><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.75</p><ul><li>狗： Precision = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>12</mn><mrow><mn>2</mn><mo>+</mo><mn>12</mn><mo>+</mo><mn>4</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{12}{2+12+4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">+</span><span class="mord mtight">12</span><span class="mbin mtight">+</span><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> =0.66</li></ul><p>Recall = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>12</mn><mrow><mn>6</mn><mo>+</mo><mn>12</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{12}{6+12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mbin mtight">+</span><span class="mord mtight">12</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.66</p><ul><li>猪：Precision = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>22</mn><mrow><mn>3</mn><mo>+</mo><mn>22</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{22}{3+22}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mbin mtight">+</span><span class="mord mtight">22</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> =0.88</li></ul><p>Recall = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>22</mn><mrow><mn>22</mn><mo>+</mo><mn>4</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{22}{22+4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span><span class="mbin mtight">+</span><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.85</p><ul><li>平均Precision = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>0.71</mn><mo>+</mo><mn>0.66</mn><mo>+</mo><mn>0.88</mn></mrow><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{0.71+0.66+0.88}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0.71</span><span class="mbin mtight">+</span><span class="mord mtight">0.66</span><span class="mbin mtight">+</span><span class="mord mtight">0.88</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.75</li></ul><p>平均Recall = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>0.75</mn><mo>+</mo><mn>0.66</mn><mo>+</mo><mn>0.85</mn></mrow><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{0.75+0.66+0.85}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0.75</span><span class="mbin mtight">+</span><span class="mord mtight">0.66</span><span class="mbin mtight">+</span><span class="mord mtight">0.85</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.75</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">F_1score</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">score</span></span></span></span>= <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>2</mn><mrow><mfrac><mn>1</mn><mrow><mtext>平均</mtext><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac><mo>+</mo><mfrac><mn>1</mn><mrow><mtext>平均</mtext><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow></mfrac></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2}{\frac{1}{平均Precision}+\frac{1}{平均Recall}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4869em;vertical-align:-0.6418em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.599em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">平均</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">平均</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">ll</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6418em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>2</mn><mo>×</mo><mtext>平均</mtext><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>×</mo><mtext>平均</mtext><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow><mrow><mtext>平均</mtext><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>+</mo><mtext>平均</mtext><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2\times平均Precision\times平均Recall}{平均Precision+平均Recall}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2834em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">平均</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord cjk_fallback mtight">平均</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">ll</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">×</span><span class="mord cjk_fallback mtight">平均</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">×</span><span class="mord cjk_fallback mtight">平均</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">ll</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> = 0.75</li></ul><p>多分类的F<sub>1</sub>score是每一类F<sub>1</sub>score的平均值</p>]]></content>
      
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
            <tag> 混淆矩阵 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小米多看电纸书墨案系统和多看系统刷机</title>
      <link href="/2022/10/03/%E5%B0%8F%E7%B1%B3%E5%A4%9A%E7%9C%8B%E7%94%B5%E7%BA%B8%E4%B9%A6%E5%88%B7%E5%A2%A8%E6%A1%88%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/10/03/%E5%B0%8F%E7%B1%B3%E5%A4%9A%E7%9C%8B%E7%94%B5%E7%BA%B8%E4%B9%A6%E5%88%B7%E5%A2%A8%E6%A1%88%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p>仅支持小米多看电纸书一代。可以刷成墨案青春版系统，也可以从墨案系统刷回原系统。新系统支持OTA升级。</p><h2 id="刷机包及刷机工具准备">刷机包及刷机工具准备</h2><h3 id="刷机包及刷机工具和驱动">刷机包及刷机工具和驱动</h3><p>刷机包提供墨案系统和小米电纸书原系统。</p><p>墨案v2系统：</p><p><a href="https://pan.baidu.com/s/1EzLDEfRitzIjlgvTySoITA?pwd=sh97">百度网盘</a>(提取码：sh97)</p><p>小米多看系统：</p><p><a href="https://pan.baidu.com/s/1jUxo5P3AQyEo-iyYcvBzCw?pwd=n19x">百度云盘</a>(提取码：n19x)</p><p>刷机工具及驱动：</p><p><a href="https://pan.baidu.com/s/1sQ1uswdjgFNh7ywkIOVY_g?pwd=3xxb">百度网盘</a>(提取码：3xxb)</p><h3 id="刷机">刷机</h3><h4 id="刷机前准备">刷机前准备</h4><p>下载刷机工具及驱动压缩包，解压。</p><p>1、进入“USB驱动”文件夹，双击install.bat文件自动安装驱动。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20221013220517241.png" alt=""></p><p>2、双击执行PhoenixSuitV1.10文件夹里的PhoenixSuit.exe应用程序，打开<strong>PhoenixSuit</strong>应用程序</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20221013220701559.png" alt=""></p><p>3、点击<strong>PhoenixSuit</strong>程序里的一键刷机，点击<strong>浏览</strong>选择<strong>后缀为img</strong>的刷机文件。</p><p><strong>注意：先别点击立即升级。</strong></p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20221013221022377.png" alt=""></p><h4 id="开始烧录">开始烧录</h4><p>1、小米电纸书关机，USB线先不连接电纸书和电脑</p><p>2、机器在关机状态后，用一个细针，插入设备底部充电口旁边的可以插入的小孔，按压下去<strong>不要松开</strong>，USB线连接电脑和电纸书。当出现以下界面时，拿开细针。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20221013221956595.png" alt=""></p><p>3、若第二部没有出现强制格式化的提示窗，按照以下步骤操作：</p><ul><li><p>电纸书关机状态下用细针插入设备底部的小孔，同时USB线连接电纸书和电脑，保持一段时间松开，这时松开细针，继续保持USB线连接。</p></li><li><p>鼠标右键点击此电脑-属性-设备管理器</p></li><li><p>这时设备管理器中的其他设备会出现<strong>黄色三角形叹号</strong>的位置设备</p></li><li><p>右键未知设备，点击<strong>更新驱动程序</strong>，点击浏览计算机以查找驱动程序文件，选择PhoenixSuitV1.10文件夹下的Drivers文件夹下的AW_Driver文件夹，进行更新驱动<img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20221013223840551.png" alt=""></p></li><li><p>驱动更新完成后未知设备会出现设备名称，PhoenixSuit软件也会出现强制格式化的弹窗。</p></li></ul><p>4、点击“是”，进行格式化(会擦除机器的所有数据，包括安装的应用和拷贝的内容);点击“否”，进行升级，不会擦除机器的数据;当点“是”或“否”后，等待几秒后会出现如下进度条，直到烧录完成。<strong>为了避免不必要的问题，建议点击“是”。</strong></p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20221013222120932.png" alt=""></p><p>5、烧写完成后，会提示“固件烧写成功”，而且机器会自动开机。自此，烧录完成。</p><h3 id="总结">总结</h3><ul><li><p>不管是烧录多看系统还是烧录墨案系统，步骤都一样。</p></li><li><p>刷机完成后，系统可正常OTA升级。</p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>邮件自动发送训练结果</title>
      <link href="/2022/05/11/%E9%82%AE%E4%BB%B6%E8%87%AA%E5%8A%A8%E5%8F%91%E9%80%81%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C/"/>
      <url>/2022/05/11/%E9%82%AE%E4%BB%B6%E8%87%AA%E5%8A%A8%E5%8F%91%E9%80%81%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="最基础的发送邮件的代码">最基础的发送邮件的代码</h2><p>首先我们看最简单的用python实现发邮件功能的代码，运行以下代码可以实现向指定的接收邮箱发送一个主题为“Training finished”，正文内容为test的邮件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="keyword">from</span> email.mime.image <span class="keyword">import</span> MIMEImage</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">subject=<span class="string">&quot;No subject&quot;</span>, content=<span class="string">&quot;I am boring&quot;</span></span>):</span><br><span class="line">  mail_host = <span class="string">&quot;smtp.163.com&quot;</span>       <span class="comment"># 邮箱的设置里的服务器地址</span></span><br><span class="line">  mail_user = <span class="string">&quot;*****@163.com&quot;</span>      <span class="comment"># 发送邮件的邮箱</span></span><br><span class="line">  mail_pw = <span class="string">&quot;*********&quot;</span>            <span class="comment"># 授权码，邮箱设置里开启POP3/SMTP服务，提供给你的密钥</span></span><br><span class="line">  sender = <span class="string">&quot;******@163.com&quot;</span>        <span class="comment"># 发送邮件的邮箱，</span></span><br><span class="line">  receiver = <span class="string">&quot;******@icloud.com&quot;</span>   <span class="comment"># 接收邮件的邮箱</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Create the container (outer) email message.</span></span><br><span class="line">  msg = MIMEText(content, <span class="string">&quot;plain&quot;</span>, <span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">  msg[<span class="string">&#x27;Subject&#x27;</span>] = subject</span><br><span class="line">  msg[<span class="string">&#x27;From&#x27;</span>] = sender</span><br><span class="line">  msg[<span class="string">&#x27;To&#x27;</span>] = receiver</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    smtp = smtplib.SMTP_SSL(mail_host, <span class="number">994</span>)   <span class="comment"># 实例化smtp服务器</span></span><br><span class="line">    smtp.login(mail_user, mail_pw)            <span class="comment"># 登录</span></span><br><span class="line">    smtp.sendmail(sender, receiver, msg.as_string())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Email send successfully&quot;</span>)</span><br><span class="line">  <span class="keyword">except</span> smtplib.SMTPException:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: email send failed&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  send_email(subject=<span class="string">&quot;Training finished&quot;</span>, content=<span class="string">&quot;Test&quot;</span>)</span><br></pre></td></tr></table></figure><p>其中，mail_host为邮箱的服务器地址，我们可以在邮箱的<strong>POP3/SMTP/IMAP</strong>设置页面里找到，如图为163邮箱的服务器地址</p><p><img src="/../images/%E9%82%AE%E4%BB%B6%E8%87%AA%E5%8A%A8%E5%8F%91%E9%80%81%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C/image-20220511223521183.png" alt=""></p><p><code>mail_user</code>为发送邮件的邮箱，负责将你的训练结果作为邮件发出去。</p><p><code>mail_pw</code>为邮箱的授权码，在<strong>POP3/SMTP/IMAP</strong>设置页面可以找到。选择开启<strong>IMAP/SMTP</strong>服务，安全识别后会提供给你密钥。</p><p><img src="/../images/%E9%82%AE%E4%BB%B6%E8%87%AA%E5%8A%A8%E5%8F%91%E9%80%81%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C/image-20220511223652757.png" alt=""></p><p><code>sender</code>和<code>mail_user</code>一样，发送邮件的邮箱</p><p><code>receiver</code>为接收邮件的邮箱。</p><h2 id="运用到训练脚本">运用到训练脚本</h2><p>以下代码是将发送邮件的代码加入到swin transformer的运行脚本中。</p><p>代码的第13-38行，111，117，123，134行是加入的自动发送邮件的脚本。</p><p>实现的是全部的epoch训练结束后，将每个epoch的损失和准确率发送到指定的邮箱里。</p><p>如果需要每个epoch训练完都发送一次邮件的话，可以自己稍微改一下for循环那里。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"><span class="keyword">from</span> torch.utils.tensorboard <span class="keyword">import</span> SummaryWriter</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> my_dataset <span class="keyword">import</span> MyDataSet</span><br><span class="line"><span class="keyword">from</span> model <span class="keyword">import</span> swin_base_patch4_window7_224 <span class="keyword">as</span> create_model</span><br><span class="line"><span class="keyword">from</span> utils <span class="keyword">import</span> read_split_data, train_one_epoch, evaluate</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="keyword">from</span> email.mime.image <span class="keyword">import</span> MIMEImage</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">subject=<span class="string">&quot;No subject&quot;</span>, content=<span class="string">&quot;I am boring&quot;</span></span>):</span><br><span class="line">  mail_host = <span class="string">&quot;smtp.163.com&quot;</span>       <span class="comment"># 邮箱的设置里的服务器地址</span></span><br><span class="line">  mail_user = <span class="string">&quot;*****@163.com&quot;</span>      <span class="comment"># 发送邮件的邮箱</span></span><br><span class="line">  mail_pw = <span class="string">&quot;*********&quot;</span>            <span class="comment"># 授权码，邮箱设置里开启POP3/SMTP服务，提供给你的密钥</span></span><br><span class="line">  sender = <span class="string">&quot;******@163.com&quot;</span>        <span class="comment"># 发送邮件的邮箱，</span></span><br><span class="line">  receiver = <span class="string">&quot;******@icloud.com&quot;</span>   <span class="comment"># 接收邮件的邮箱</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Create the container (outer) email message.</span></span><br><span class="line">  msg = MIMEText(content, <span class="string">&quot;plain&quot;</span>, <span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">  msg[<span class="string">&#x27;Subject&#x27;</span>] = subject</span><br><span class="line">  msg[<span class="string">&#x27;From&#x27;</span>] = sender</span><br><span class="line">  msg[<span class="string">&#x27;To&#x27;</span>] = receiver</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    smtp = smtplib.SMTP_SSL(mail_host, <span class="number">994</span>)  <span class="comment"># 实例化smtp服务器</span></span><br><span class="line">    smtp.login(mail_user, mail_pw)           <span class="comment"># 登录</span></span><br><span class="line">    smtp.sendmail(sender, receiver, msg.as_string())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Email send successfully&quot;</span>)</span><br><span class="line">  <span class="keyword">except</span> smtplib.SMTPException:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: email send failed&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">args</span>):</span><br><span class="line">    device = torch.device(args.device <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&quot;./weights&quot;</span>) <span class="keyword">is</span> <span class="literal">False</span>:</span><br><span class="line">        os.makedirs(<span class="string">&quot;./weights&quot;</span>)</span><br><span class="line"></span><br><span class="line">    tb_writer = SummaryWriter()</span><br><span class="line"></span><br><span class="line">    train_images_path, train_images_label, val_images_path, val_images_label = read_split_data(args.data_path)</span><br><span class="line"></span><br><span class="line">    img_size = <span class="number">224</span></span><br><span class="line">    data_transform = &#123;</span><br><span class="line">        <span class="string">&quot;train&quot;</span>: transforms.Compose([transforms.RandomResizedCrop(img_size),</span><br><span class="line">                                     transforms.RandomHorizontalFlip(),</span><br><span class="line">                                     transforms.ToTensor(),</span><br><span class="line">                                     transforms.Normalize([<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>], [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])]),</span><br><span class="line">        <span class="string">&quot;val&quot;</span>: transforms.Compose([transforms.Resize(<span class="built_in">int</span>(img_size * <span class="number">1.143</span>)),</span><br><span class="line">                                   transforms.CenterCrop(img_size),</span><br><span class="line">                                   transforms.ToTensor(),</span><br><span class="line">                                   transforms.Normalize([<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>], [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])])&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 实例化训练数据集</span></span><br><span class="line">    train_dataset = MyDataSet(images_path=train_images_path,</span><br><span class="line">                              images_class=train_images_label,</span><br><span class="line">                              transform=data_transform[<span class="string">&quot;train&quot;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 实例化验证数据集</span></span><br><span class="line">    val_dataset = MyDataSet(images_path=val_images_path,</span><br><span class="line">                            images_class=val_images_label,</span><br><span class="line">                            transform=data_transform[<span class="string">&quot;val&quot;</span>])</span><br><span class="line"></span><br><span class="line">    batch_size = args.batch_size</span><br><span class="line">    nw = <span class="built_in">min</span>([os.cpu_count(), batch_size <span class="keyword">if</span> batch_size &gt; <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span>, <span class="number">8</span>])  <span class="comment"># number of workers</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Using &#123;&#125; dataloader workers every process&#x27;</span>.<span class="built_in">format</span>(nw))</span><br><span class="line">    train_loader = torch.utils.data.DataLoader(train_dataset,</span><br><span class="line">                                               batch_size=batch_size,</span><br><span class="line">                                               shuffle=<span class="literal">True</span>,</span><br><span class="line">                                               pin_memory=<span class="literal">True</span>,</span><br><span class="line">                                               num_workers=nw,</span><br><span class="line">                                               collate_fn=train_dataset.collate_fn)</span><br><span class="line"></span><br><span class="line">    val_loader = torch.utils.data.DataLoader(val_dataset,</span><br><span class="line">                                             batch_size=batch_size,</span><br><span class="line">                                             shuffle=<span class="literal">False</span>,</span><br><span class="line">                                             pin_memory=<span class="literal">True</span>,</span><br><span class="line">                                             num_workers=nw,</span><br><span class="line">                                             collate_fn=val_dataset.collate_fn)</span><br><span class="line"></span><br><span class="line">    model = create_model(num_classes=args.num_classes).to(device)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.weights != <span class="string">&quot;&quot;</span>:</span><br><span class="line">        <span class="keyword">assert</span> os.path.exists(args.weights), <span class="string">&quot;weights file: &#x27;&#123;&#125;&#x27; not exist.&quot;</span>.<span class="built_in">format</span>(args.weights)</span><br><span class="line">        weights_dict = torch.load(args.weights, map_location=device)[<span class="string">&quot;model&quot;</span>]</span><br><span class="line">        <span class="comment"># 删除有关分类类别的权重</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">list</span>(weights_dict.keys()):</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&quot;head&quot;</span> <span class="keyword">in</span> k:</span><br><span class="line">                <span class="keyword">del</span> weights_dict[k]</span><br><span class="line">        <span class="built_in">print</span>(model.load_state_dict(weights_dict, strict=<span class="literal">False</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.freeze_layers:</span><br><span class="line">        <span class="keyword">for</span> name, para <span class="keyword">in</span> model.named_parameters():</span><br><span class="line">            <span class="comment"># 除head外，其他权重全部冻结</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&quot;head&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> name:</span><br><span class="line">                para.requires_grad_(<span class="literal">False</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;training &#123;&#125;&quot;</span>.<span class="built_in">format</span>(name))</span><br><span class="line"></span><br><span class="line">    pg = [p <span class="keyword">for</span> p <span class="keyword">in</span> model.parameters() <span class="keyword">if</span> p.requires_grad]</span><br><span class="line">    optimizer = optim.AdamW(pg, lr=args.lr, weight_decay=<span class="number">5E-2</span>)</span><br><span class="line">    </span><br><span class="line">    content=<span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(args.epochs):</span><br><span class="line">        <span class="comment"># train</span></span><br><span class="line">        train_loss, train_acc = train_one_epoch(model=model,optimizer=optimizer,data_loader=train_loader,device=device,epoch=epoch)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 将训练损失和准确率保存为字符串</span></span><br><span class="line">        content+=<span class="string">&#x27;[train epoch:&#123;&#125;]loss:&#123;:.3f&#125;,acc:&#123;:.3f&#125;&#x27;</span>.<span class="built_in">format</span>(epoch,train_loss,train_acc) + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">       </span><br><span class="line">        <span class="comment"># validate</span></span><br><span class="line">        val_loss, val_acc = evaluate(model=model,data_loader=val_loader,device=device, epoch=epoch)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 将验证的损失和准确率保存为字符串</span></span><br><span class="line">        content+=<span class="string">&#x27;[val epoch:&#123;&#125;]loss:&#123;:.3f&#125;,acc:&#123;:.3f&#125;&#x27;</span>.<span class="built_in">format</span>(epoch,val_loss,val_acc) + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        </span><br><span class="line">        tags = [<span class="string">&quot;train_loss&quot;</span>, <span class="string">&quot;train_acc&quot;</span>, <span class="string">&quot;val_loss&quot;</span>, <span class="string">&quot;val_acc&quot;</span>, <span class="string">&quot;learning_rate&quot;</span>]</span><br><span class="line">        tb_writer.add_scalar(tags[<span class="number">0</span>], train_loss, epoch)</span><br><span class="line">        tb_writer.add_scalar(tags[<span class="number">1</span>], train_acc, epoch)</span><br><span class="line">        tb_writer.add_scalar(tags[<span class="number">2</span>], val_loss, epoch)</span><br><span class="line">        tb_writer.add_scalar(tags[<span class="number">3</span>], val_acc, epoch)</span><br><span class="line">        tb_writer.add_scalar(tags[<span class="number">4</span>], optimizer.param_groups[<span class="number">0</span>][<span class="string">&quot;lr&quot;</span>], epoch)</span><br><span class="line"></span><br><span class="line">        torch.save(model.state_dict(), <span class="string">&quot;./weights/model-&#123;&#125;.pth&quot;</span>.<span class="built_in">format</span>(epoch))</span><br><span class="line">    <span class="comment"># email，调用函数，发送邮件</span></span><br><span class="line">    send_email(subject=<span class="string">&#x27;Training finished&#x27;</span>,content=content)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--num_classes&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">2</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--epochs&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">10</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--batch-size&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">32</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--lr&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.0001</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 数据集所在根目录</span></span><br><span class="line">    <span class="comment"># https://storage.googleapis.com/download.tensorflow.org/example_images/flower_photos.tgz</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--data-path&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>,default=<span class="string">&quot;/content/drive/MyDrive/transformer/double/skin_photos&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 预训练权重路径，如果不想载入就设置为空字符</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--weights&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;/content/drive/MyDrive/transformer/swin_transformer/swin_base_patch4_window7_224.pth&#x27;</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&#x27;initial weights path&#x27;</span>)</span><br><span class="line">    <span class="comment"># 是否冻结权重</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--freeze-layers&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">bool</span>, default=<span class="literal">False</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--device&#x27;</span>, default=<span class="string">&#x27;cuda:0&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;device id (i.e. 0 or 0,1 or cpu)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    opt = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    main(opt)</span><br></pre></td></tr></table></figure><h3 id="测试结果">测试结果</h3><p>训练完成后，邮箱可以收到如下邮件：</p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/test.jpg" style="zoom: 33%;" />]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Markdown基本语法</title>
      <link href="/2022/01/22/Markdown/"/>
      <url>/2022/01/22/Markdown/</url>
      
        <content type="html"><![CDATA[<h2 id="多级标题">多级标题</h2><p>markdown中最多支持六级标题，但一般但为了增强文档的易读性,建议最多使用4级标题。</p><div class="tabs" id="duoji"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#duoji-1">方法1</button></li><li class="tab"><button type="button" data-href="#duoji-2">渲染效果</button></li><li class="tab"><button type="button" data-href="#duoji-3">方法2(不常用)</button></li><li class="tab"><button type="button" data-href="#duoji-4">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="duoji-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="duoji-2"><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/202212171911684.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="duoji-3"><p>该方法只能用于一级标题和二级标题。只要在标题名称下添加任意数量的<code>=</code>或者<code>-</code>即可实现。<br>不常用。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">H1</span></span><br><span class="line"><span class="section">========</span></span><br><span class="line"><span class="section">H2</span></span><br><span class="line"><span class="section">--------</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="duoji-4"><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/20221217195554.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="字体">字体</h2><div class="tabs" id="ziti"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ziti-1">语法示例</button></li><li class="tab"><button type="button" data-href="#ziti-2">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ziti-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**这是加粗的文字**</span></span><br><span class="line"><span class="emphasis">*这是斜体的文字*</span>`</span><br><span class="line"><span class="strong">**<span class="emphasis">*这是斜体加粗的文字*</span>**</span></span><br><span class="line">~~这是加删除线的文字~~</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ziti-2"><p><strong>这是加粗的文字</strong><br><em>这是斜体的文字</em>`<br><em><strong>这是斜体加粗的文字</strong></em><br><s>这是加删除线的文字</s></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="引用">引用</h2><div class="tabs" id="yinyong"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#yinyong-1">语法示例</button></li><li class="tab"><button type="button" data-href="#yinyong-2">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="yinyong-1"><p>在段落的每行或者只在第一行使用符号&gt;,还可使用多个嵌套引用，</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; 这是引用的内容1</span></span><br><span class="line"><span class="quote">&gt; 这是引用的内容2</span></span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt;&gt; 这是引用的内容3</span></span><br><span class="line">&gt;&gt;&gt; 这是引用的内容4</span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt; 这是引用的内容5</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="yinyong-2"><blockquote><p>这是引用的内容1<br>这是引用的内容2</p><blockquote><p>这是引用的内容3</p><blockquote><p>这是引用的内容4</p></blockquote></blockquote><p>这是引用的内容5</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="大于小于号">大于小于号</h2><p>由于在markdown中直接输入“&gt;” 会直接进行引用的操作，所以，我们使用转义字符来代替。</p><div class="tabs" id="yinyong"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#yinyong-1">语法示例</button></li><li class="tab"><button type="button" data-href="#yinyong-2">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="yinyong-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;gt;# &gt;</span><br><span class="line">&amp;lt;# &lt;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="yinyong-2"><p>&gt;<br>&lt;</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="分割线">分割线</h2><div class="tabs" id="fenge"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#fenge-1">语法示例</button></li><li class="tab"><button type="button" data-href="#fenge-2">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="fenge-1"><p>连续的三个及以上的星号<code>*</code>、减号<code>-</code>、下划线<code>_</code>会被渲染成分割线。</p><p>使用<code>-</code>做分割线时有的渲染器会渲染成二级标题，建议使用<code>*</code>或<code>_</code>。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">***</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="fenge-2"><p>分割线(使用-)</p><hr><p>分割线(使用*)</p><hr><p>分割线(使用_)</p><hr><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="列表">列表</h2><div class="tabs" id="list"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#list-1">语法示例</button></li><li class="tab"><button type="button" data-href="#list-2">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="list-1"><p>使用<code>'+'</code>, <code>'-'</code>, <code>'*'</code>都可以。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">+</span> 1</span><br><span class="line"><span class="bullet">+</span> 2</span><br><span class="line"><span class="bullet">  +</span> 2.5</span><br><span class="line"><span class="bullet">    +</span> 2.75</span><br><span class="line"><span class="bullet">*</span> 3</span><br><span class="line"><span class="bullet">  *</span> 3.5</span><br><span class="line"><span class="bullet">    *</span> 3.75</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="list-2"><ul><li>1</li><li>2<ul><li>2.5<ul><li>2.75</li></ul></li></ul></li></ul><ul><li>3<ul><li>3.5<ul><li>3.75</li></ul></li></ul></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="插入公式">插入公式</h2><div class="tabs" id="gongshi"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#gongshi-1">语法示例</button></li><li class="tab"><button type="button" data-href="#gongshi-2">渲染效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="gongshi-1"><p>第一个{  }为分子，第二个{  }为分母。且公式可以嵌套</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">行内公式: $\frac&#123;1&#125;&#123;Precision&#125;$</span><br><span class="line"></span><br><span class="line">行外公式: </span><br><span class="line">$$\frac&#123;1&#125;&#123;2&#125;$$</span><br><span class="line"></span><br><span class="line">公式嵌套：F = $\frac&#123;2&#125;&#123;\frac&#123;1&#125;&#123;Precision&#125;+\frac&#123;1&#125;&#123;Recall&#125;&#125;$ </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gongshi-2"><p>行内公式: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{Precision}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p>行外公式:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>公式嵌套：<br>F = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>2</mn><mrow><mfrac><mn>1</mn><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac><mo>+</mo><mfrac><mn>1</mn><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow></mfrac></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2}{\frac{1}{Precision}+\frac{1}{Recall}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4869em;vertical-align:-0.6418em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.599em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">rec</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">ll</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6418em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中的数据结构</title>
      <link href="/2022/01/20/python%E4%B8%AD%E6%95%B0%E7%BB%84%E7%BB%B4%E5%BA%A6/"/>
      <url>/2022/01/20/python%E4%B8%AD%E6%95%B0%E7%BB%84%E7%BB%B4%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<h2 id="张量">张量</h2><h3 id="0维向量">0维向量</h3><h3 id="一维张量">一维张量</h3><p>向量就是一维张量。一维张量没有行和列的概念，只有长度的概念。如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">&gt;&gt;&gt;[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"><span class="built_in">print</span>(a.shape)</span><br><span class="line">&gt;&gt;&gt;(<span class="number">4</span>,)</span><br></pre></td></tr></table></figure><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220120224802179.png" alt=""></p><h3 id="二维张量">二维张量</h3><p>矩阵就是二维张量，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">b = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],[<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]])</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">&gt;&gt;&gt;[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>]</span><br><span class="line">    [<span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span>]]</span><br><span class="line"><span class="built_in">print</span>(b.shape)</span><br><span class="line">&gt;&gt;&gt;(<span class="number">3</span>,<span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>打印出来的就是一个三行四列的矩阵。<img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220120224641081.png" alt=""></p><h3 id="三维张量">三维张量</h3><p>三维张量在行和列的基础上增加了深度的方向。</p><p>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">c = np.array([[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]])</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line">&gt;&gt;&gt;[[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">   [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]]]</span><br><span class="line"><span class="built_in">print</span>(c.shape)</span><br><span class="line">&gt;&gt;&gt;(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>打印的是深度为1的二行三列的三维张量</p><p>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">d = np.array([[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]],[[<span class="number">11</span>,<span class="number">12</span>],[<span class="number">13</span>,<span class="number">14</span>],[<span class="number">15</span>,<span class="number">16</span>],[<span class="number">17</span>,<span class="number">18</span>]],[[<span class="number">21</span>,<span class="number">22</span>],[<span class="number">23</span>,<span class="number">24</span>],[<span class="number">25</span>,<span class="number">26</span>],[<span class="number">27</span>,<span class="number">28</span>]]])</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line">&gt;&gt;&gt;[[[ <span class="number">1</span>  <span class="number">2</span>]</span><br><span class="line">     [ <span class="number">3</span>  <span class="number">4</span>]</span><br><span class="line">  [ <span class="number">5</span>  <span class="number">6</span>]</span><br><span class="line">  [ <span class="number">7</span>  <span class="number">8</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">11</span> <span class="number">12</span>]</span><br><span class="line">  [<span class="number">13</span> <span class="number">14</span>]</span><br><span class="line">   [<span class="number">15</span> <span class="number">16</span>]</span><br><span class="line">  [<span class="number">17</span> <span class="number">18</span>]]</span><br><span class="line"></span><br><span class="line">[[<span class="number">21</span> <span class="number">22</span>]</span><br><span class="line">   [<span class="number">23</span> <span class="number">24</span>]</span><br><span class="line">   [<span class="number">25</span> <span class="number">26</span>]</span><br><span class="line">   [<span class="number">27</span> <span class="number">28</span>]]]</span><br><span class="line"><span class="built_in">print</span>(d.shape)</span><br><span class="line">&gt;&gt;&gt;(<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>打印的是一个深度为2的二行三列三维张量。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220120224937742.png" alt=""></p><h3 id="四维张量">四维张量</h3><p>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">e = np.array([[[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]],[[<span class="number">11</span>,<span class="number">12</span>],[<span class="number">13</span>,<span class="number">14</span>],[<span class="number">15</span>,<span class="number">16</span>],[<span class="number">17</span>,<span class="number">18</span>]],[[<span class="number">21</span>,<span class="number">22</span>],[<span class="number">23</span>,<span class="number">24</span>],[<span class="number">25</span>,<span class="number">26</span>],[<span class="number">27</span>,<span class="number">28</span>]]],[[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]],[[<span class="number">11</span>,<span class="number">12</span>],[<span class="number">13</span>,<span class="number">14</span>],[<span class="number">15</span>,<span class="number">16</span>],[<span class="number">17</span>,<span class="number">18</span>]],[[<span class="number">21</span>,<span class="number">22</span>],[<span class="number">23</span>,<span class="number">24</span>],[<span class="number">25</span>,<span class="number">26</span>],[<span class="number">27</span>,<span class="number">28</span>]]]])</span><br><span class="line"><span class="built_in">print</span>(e)</span><br><span class="line">&gt;&gt;&gt;[[[[ <span class="number">1</span>  <span class="number">2</span>]</span><br><span class="line">    [ <span class="number">3</span>  <span class="number">4</span>]</span><br><span class="line">    [ <span class="number">5</span>  <span class="number">6</span>]</span><br><span class="line">     [ <span class="number">7</span>  <span class="number">8</span>]]</span><br><span class="line"></span><br><span class="line">   [[<span class="number">11</span> <span class="number">12</span>]</span><br><span class="line">      [<span class="number">13</span> <span class="number">14</span>]</span><br><span class="line">      [<span class="number">15</span> <span class="number">16</span>]</span><br><span class="line">      [<span class="number">17</span> <span class="number">18</span>]]</span><br><span class="line"></span><br><span class="line">     [[<span class="number">21</span> <span class="number">22</span>]</span><br><span class="line">      [<span class="number">23</span> <span class="number">24</span>]</span><br><span class="line">      [<span class="number">25</span> <span class="number">26</span>]</span><br><span class="line">      [<span class="number">27</span> <span class="number">28</span>]]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [[[ <span class="number">1</span>  <span class="number">2</span>]</span><br><span class="line">      [ <span class="number">3</span>  <span class="number">4</span>]</span><br><span class="line">      [ <span class="number">5</span>  <span class="number">6</span>]</span><br><span class="line">      [ <span class="number">7</span>  <span class="number">8</span>]]</span><br><span class="line"></span><br><span class="line">     [[<span class="number">11</span> <span class="number">12</span>]</span><br><span class="line">      [<span class="number">13</span> <span class="number">14</span>]</span><br><span class="line">      [<span class="number">15</span> <span class="number">16</span>]</span><br><span class="line">      [<span class="number">17</span> <span class="number">18</span>]]</span><br><span class="line"></span><br><span class="line">     [[<span class="number">21</span> <span class="number">22</span>]</span><br><span class="line">      [<span class="number">23</span> <span class="number">24</span>]</span><br><span class="line">      [<span class="number">25</span> <span class="number">26</span>]</span><br><span class="line">      [<span class="number">27</span> <span class="number">28</span>]]]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(e.shape)</span><br><span class="line">&gt;&gt;&gt;(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>解决next博客文章目录点击不跳转的问题</title>
      <link href="/2022/01/18/%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95%E7%82%B9%E5%87%BB%E4%B8%8D%E8%B7%B3%E8%BD%AC%E9%97%AE%E9%A2%98/"/>
      <url>/2022/01/18/%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95%E7%82%B9%E5%87%BB%E4%B8%8D%E8%B7%B3%E8%BD%AC%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>博客的目录点击不跳转，该bug发生在中文语言的目录里。</p><p>打开我们博客的文章页面，键盘F12打开网页的控制台，点击文章目录，控制台会报出如下错误：</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/76d53c14f481c189b57e13fe048692d0f6ec0965.png@830w_242h_progressive.webp" alt=""></p><p>根据提示，我们可以发现<code>utils.js</code>文件的第243行出现问题。</p><p>我们打开主题的<code>themes\next\source\js</code>文件夹，打开<code>utils.js</code>文件，定位到240行附近，根据GitHub上的解决方法，删除以及添加几行，即可解决该问题，</p><p><a href="https://github.com/theme-next/hexo-theme-next/pull/1540/commits/ec521c927dc10255977324284c1c667f2e220da7#diff-1792ad8339d1eed2d547ed3d50641a26797c40e48aadd09521293105d88f158cR245">GitHub链接</a></p><p>改成如图所示：</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220117220110124-16424309430776.png" alt=""></p><p>保存，即可解决该bug。</p>]]></content>
      
      
      <categories>
          
          <category> hexo教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> next </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorch和Pycharm的安装和配置</title>
      <link href="/2022/01/05/Pytorch%E5%92%8CPycharm%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/01/05/Pytorch%E5%92%8CPycharm%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="搭载Conda环境">搭载Conda环境</h2><p>搭载Conda环境我们使用Anaconda软件</p><h3 id="下载">下载</h3><p><a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">清华源镜像</a>根据自己电脑的系统选择最新的安装包，我的电脑为Windows10 64位，因此选择第一个。<br><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105170049546.png" alt=""></p><h3 id="安装">安装</h3><p>安装路径可自定。为了减少以后不必要的麻烦，建议选All users。以及勾选advanced options的第一个选项，其余默认即可。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105170237869.png" alt=""></p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105170647257.png" alt=""></p><p>安装需要一些时间。。。</p><h3 id="使用">使用</h3><p>安装完成后，Windows开始菜单可以看到，在Prompt中输入conda list，能看到许多packages，证明安装完成。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105171130573.png" alt=""></p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105171429207.png" style="zoom:67%;" /><h3 id="创建python环境">创建python环境</h3><p>anaconda prompt创建环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建一个名字为DPlearning的python3.9环境，环境名称和python版本可自定</span></span><br><span class="line">conda create -n DPlearning python=3.9</span><br></pre></td></tr></table></figure><p>会安装一些包，选择y即可。</p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105172757325.png" style="zoom: 67%;" /><p>安装完成后可以搭建pytorch的环境。</p><h3 id="GPU环境">GPU环境</h3><p>我的电脑有英伟达的GPU，因此装的GPU环境。如没有GPU，就安装CPU版本。</p><p>桌面右键打开英伟达控制面板，右键没有英伟达控制面板就去挂网下载最新驱动</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105173224328.png" alt=""></p><p>点击系统信息，</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105173302254.png" alt=""></p><p>根据驱动版本选择对应的cuda版本</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105173408251.png" alt=""></p><p>或者在组件里能够看到支持的最高cuda版本</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105173408251.png" alt=""></p><h4 id="安装pytorch-GPU版本">安装pytorch GPU版本</h4><p><a href="https://pytorch.org/">pytorch官网</a></p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105173907106.png" alt=""></p><p>根据自己的需求选。可以使用conda来安装，也可以使用pip命令来安装。如果安装的很慢，可以去下载torch，torchvision，和torchaudio的wheel包来手动安装。</p><p>#####　在线安装</p><p>使用命令，让电脑自动安装。最简单的安装方式，但有时速度会比较慢，可以再选择离线安装。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105173924774.png" alt=""></p><p>安装包很大，所以我们最好在安装前先配置上清华源，prompt输入以下命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels <span class="attr">https</span>:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span></span><br><span class="line">conda config --add channels <span class="attr">https</span>:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span></span><br><span class="line">conda config --set show_channel_urls yes</span><br><span class="line">conda config --add channels　<span class="attr">https</span>:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</span></span><br></pre></td></tr></table></figure><p>复制安装命令，<strong>注意，去掉后面的-c pytorch</strong></p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105174034252.png" alt=""></p><p>然后DOS窗口<strong>activate命令进入刚刚建立的conda环境</strong>，粘贴安装命令，回车，等待安装。。。</p><p>出现选择统统选y。等待。。。</p><p>安装完成</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105182909350.png" alt=""></p><p>输入以下命令检测是否安装成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">import torch<span class="comment">#未报错说明torch安装成功</span></span><br><span class="line"><span class="built_in">print</span>(torch.cuda.is_available())<span class="comment">#输出为True说明cuda安装正常</span></span><br></pre></td></tr></table></figure><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105183052580.png" alt=""></p><h5 id="离线安装">离线安装</h5><p>下载torch，torchvision，torchaudio的whl文件。</p><p>官网下载：<a href="https://download.pytorch.org/whl">https://download.pytorch.org/whl</a> 。根据自己电脑的版本，下载对应的whl文件。下载完成后，激活conda环境，cd 到whl文件所在的目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install whl文件名称</span><br><span class="line"># .whl后缀要保留</span><br></pre></td></tr></table></figure><p>至此，pytorch和cuda的安装结束。接下来是在pycharm里配置pytorch。</p><h3 id="CPU环境">CPU环境</h3><p>电脑没有nVidia的GPU就安装CPU版本。</p><h2 id="Pycharm">Pycharm</h2><h3 id="下载-2">下载</h3><p><a href="https://www.jetbrains.com/pycharm/download/#section=windows">官网下载</a> 下载社区版就行。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105172257502.png" alt=""></p><h3 id="安装-2">安装</h3><p>按照自己需求勾选。对后续进程无影响。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105185236893.png" alt=""></p><p>等待安装完成。。。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105185522779.png" alt="image-20220105185522779"></p><h3 id="配置环境">配置环境</h3><p>新项目的位置可以自定，由于之前配置了pytorch环境，所以我们选择Previously configured interpreter，选中之前配置好的python解释器，点击创建，</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105190058442.png" alt=""></p><p>如果Previously configured interpreter空白，点后面的三个点，可以找到之前配置好的python解释器。选择完后点创建。<br><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105190312021.png" alt=""></p><p>pycharm设置里，python解释器里也有torch，终端命令检测也正常。</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105195741017.png" alt=""></p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220105195936721.png" alt=""></p><p>至此，安装结束。</p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
            <tag> pytorch </tag>
            
            <tag> pycharm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客插件和美化</title>
      <link href="/2022/01/04/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
      <url>/2022/01/04/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="插入本地图片">插入本地图片</h3><p>需要将要插入的本地图片保存在博客根目录里source/images文件夹内。若没有images文件夹则新建一个，命名可自定。<br>然后加入以下代码：<br><strong>方法一：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![]()</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![a <span class="built_in">cat</span>](/images/cat.png)</span><br></pre></td></tr></table></figure><p>其中，[]内为对图片的描述，可以空白。</p><p><strong>方法二：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;/images/cat.png&quot;</span> alt=<span class="string">&quot;a cat&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>&quot;&quot;部分为本地图片的目录，和方法一的括号部分一样。alt部分为对图片的描述，可省略。</p><p>若要更改图片的大小，可以使用以下语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;/images/cat.png&quot;</span> width = <span class="string">&quot;300&quot;</span> height = <span class="string">&quot;200&quot;</span> alt=<span class="string">&quot;a cat&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>可以将图片设定为300x200尺寸大小。<br>也可以用百分比表示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;/images/cat.png&quot;</span> width=<span class="string">&quot;50%&quot;</span> height=<span class="string">&quot;50%&quot;</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="插入网络图片">插入网络图片</h3><p>和插入本地图片的方法类似，只是把括号和引号内的内容换成网络图片的链接即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![](https://*******)</span><br><span class="line">或者：</span><br><span class="line">&lt;img src=<span class="string">&quot;https://*******&quot;</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="首页显示文章部分预览">首页显示文章部分预览</h2><p>首页只预览部分内容，剩余内容需要点击阅读全文才能看到：<br>使用以下语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--more--&gt; </span><br></pre></td></tr></table></figure><p>语法后面的内容在首页看不到，只有点击阅读全文才能看到。</p><h2 id="插入空格">插入空格</h2><p>插入一个空格 (non-breaking space)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 以下三种方法都可</span><br><span class="line"><span class="symbol">&amp;nbsp;</span></span><br><span class="line"><span class="symbol">&amp;#160;</span></span><br><span class="line"><span class="symbol">&amp;#xA0;</span></span><br></pre></td></tr></table></figure><p>插入两个空格（en space）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 以下三种方法都可</span><br><span class="line"><span class="symbol">&amp;ensp;</span></span><br><span class="line">&amp;#8194；</span><br><span class="line">&amp;#x2002；</span><br></pre></td></tr></table></figure><p>插入四个空格（em space）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 以下三种方法都可</span><br><span class="line"><span class="symbol">&amp;emsp;</span></span><br><span class="line"><span class="symbol">&amp;#8195;</span></span><br><span class="line"><span class="symbol">&amp;#x2003;</span></span><br></pre></td></tr></table></figure><p>插入细空格（thin space）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 以下三种方法都可</span><br><span class="line"><span class="symbol">&amp;thinsp;</span></span><br><span class="line"><span class="symbol">&amp;#8201;</span></span><br><span class="line"><span class="symbol">&amp;#x2009;</span></span><br></pre></td></tr></table></figure><p><strong>注意：不要漏掉分号。</strong></p><h2 id="文章加密">文章加密</h2><h3 id="安装插件">安装插件</h3><p>目录根目录下安装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-blog-encrypt --save</span><br></pre></td></tr></table></figure><h3 id="使用">使用</h3><p>在文章开头添加密码和提示信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: test1</span><br><span class="line">password: 123456</span><br><span class="line">message: 请输入密码：</span><br><span class="line">abstract: 仅用来测试某些功能。(自用)</span><br></pre></td></tr></table></figure><p><strong>注意：文章解锁后并不会自动加密，所以关闭文章前要手动点击文章最后方的<code>Encrypt again</code>按钮，重新加密。</strong></p><h2 id="站点地图-sitemap-生成与使用">站点地图 sitemap 生成与使用</h2><h3 id="配置Google-Search-Console">配置Google Search Console</h3><ul><li>打开<a href="https://search.google.com/search-console/welcome">Google Search Console</a>网站</li><li>在<code>网址前缀</code>输入你的博客地址。例如，我的就是：<a href="https://www.wshuai.xyz/">https://www.wshuai.xyz/</a></li><li>验证所有权建议使用第二种：<strong>HTML标记</strong></li><li>复制HTML标记方法里谷歌提供的代码的<strong>最后的双引号</strong>部分</li><li>打开博客的<strong>主题配置</strong>文件<code>_config.yml</code></li><li>将刚刚复制的代码粘贴到google_site_verification后面（注意冒号之后空一格）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Google Webmaster tools verification.</span><br><span class="line"># See: https://www.google.com/webmasters</span><br><span class="line">    google_site_verification:   #粘贴复制的代码</span><br></pre></td></tr></table></figure><ul><li>最后保存，再使用hexo命令上传到GitHub</li><li>回到Google Search Console，点击验证，即可验证成功</li></ul><h3 id="配置百度站长平台">配置百度站长平台</h3><p>与谷歌的配置方法相似，<a href="https://ziyuan.baidu.com/dashboard/">百度站长平台</a> ,同样使用<strong>HTML标记</strong>方法验证。同样需要复制到<strong>主题配置</strong>文件，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Baidu Webmaster tools verification.</span><br><span class="line"># See: https://ziyuan.baidu.com/site</span><br><span class="line">baidu_site_verification: #粘贴复制的代码（冒号后空一格）</span><br></pre></td></tr></table></figure><p>保存，上传，验证。</p><h3 id="通用站点地图">通用站点地图</h3><p>可用于谷歌等网站，不能用于百度。</p><p>安装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><p>打开<strong>站点配置</strong>文件<code>_config.yml</code>，添加以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通用站点地图</span></span><br><span class="line">sitemap:</span><br><span class="line">  path: sitemap.xml</span><br></pre></td></tr></table></figure><ul><li>代码添加完成后使用hexo命令重新上传博客到github</li><li>打开<a href="https://search.google.com/search-console/welcome">Google Search Console</a> 点击索引里的站点地图，输入sitemap.xml,点击提交。</li><li>注意：若您的博客未使用自定义域名可能会导致提交失败，建议博客使用自定义域名。</li></ul><h3 id="百度站点地图">百度站点地图</h3><p>安装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><p>打开<strong>站点配置</strong>文件<code>_config.yml</code>，添加以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 百度站点地图</span></span><br><span class="line">baidusitemap:</span><br><span class="line">  path: baidusitemap.xml</span><br></pre></td></tr></table></figure><ul><li><p>代码添加完成后使用hexo命令重新上传博客到github</p></li><li><p>需要在<a href="https://ziyuan.baidu.com/dashboard/">百度站长平台</a>注册好账号，添加好自己的站点信息。</p></li><li><p>点击资源提交的普通收录，选择sitmap</p></li><li><p>填写数据文件地址，例如：<a href="http://www.wshuai.xyz/baidusitemap.xml">http://www.wshuai.xyz/baidusitemap.xml</a> ,即自己的域名后加xml名称，检查无误后点击提交</p></li><li><p>提交后下方会显示文件名称，状态为等待。等待几天百度就会进行提取。</p></li></ul><h2 id="百度主动推送">百度主动推送</h2><h3 id="安装插件-2">安装插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></table></figure><p>在<strong>站点配置</strong>文件<code>_config.yml</code> 中添加以下代码：</p><p>根据自己的信息修改，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 百度主动推送</span></span><br><span class="line">baidu_url_submit:</span><br><span class="line">  count: 5                       <span class="comment">## 提交最新的5个链接</span></span><br><span class="line">  host: https://www.wshuai.xyz/   <span class="comment">## 百度站长平台中注册的域名</span></span><br><span class="line">  token: ****************         <span class="comment">## 准入秘钥</span></span><br><span class="line">  path: baidu_urls.txt            <span class="comment">## 文本文档的地址， 新链接会保存在此文本文档里</span></span><br></pre></td></tr></table></figure><ul><li><p>其中host填写自己在百度站长平台登陆的域名，也必须与<code>_config.yml</code>文件中url的值一样。</p></li><li><p>打开百度站长平台，点击普通收录的API提交，复制接口调用地址里<code>=</code><strong>后面</strong>的部分，粘贴到站点配置信息的token的后面。</p></li><li><p>最后加入新的deployer,打开<strong>站点配置</strong>文件，找到deploy部分，添加百度推送代码，如下：</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/WShuai123/wshuai123.github.io.git</span><br><span class="line">  branch: master</span><br><span class="line">- <span class="built_in">type</span>: baidu_url_submitter         <span class="comment">#添加这一行代码</span></span><br></pre></td></tr></table></figure><p>这样在用git上传时同时就会向百度主动传送自己的网页。</p>]]></content>
      
      
      <categories>
          
          <category> hexo教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> next </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/2022/01/04/test1/"/>
      <url>/2022/01/04/test1/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="6249b2b88c6124c0423064f293fc0592fc69763f0220daebc633acaa24c2dd31">4630436162ade97ba2718b7d0c4b3b6317ee096b0bababe04acabe9393d1a6ce3570d17368b1ea3f92afd41ef5aa03aabb51f198a4050a6edbd6077dd86fe07c7ae911d4fb51f5033654ef7681a6d9c97eb2845d8a1bcd2f22c8e2ba9b8729737651dd6aa688b406bdc996dc5344ea729a75188dcf3d294eed40a19b15c3eeed80d47dbf98fd31647e5577e5f49d1af000f204e440cd054f28cf2afb800ce3414418148bef12f1d2e196230371529eaacba6067f5bc34e5564e1533bd75f38c8b1c0a21cfce740def0a8f5ccab92ce7e7408f3871bcd77a39a415cd4a09f8bbec39903b529d81abaa23eb85bad22452857f6271b68c310e9fae663d8332d2438eddc008b1c72f9eb18f42f2a0627bd5d51e777966ad01b85c6c000f8b570350a35ee22e8c8526cf9bd82180bb322f1d8a721cadaccd2c8a20cb428bf6ca292cd1debaba55883d9145b9a5a7cf76556db5041ec308ed52ef5747bd41411df265841a8fb22ce16ef87ce29c24d9f568be69d2bfc05aaa4c9c785498884bce968c628b8ad3016ebae95e6ba68a3c81b9c6cc69cbd25c0cbf0455737a26884577ae925f02928b9cd34fb88dac9b91d6ce419fd6df1b41a3f8254152da0498d2a363579686fa16c9f422692b674450364fe651bfd3e424c540f9c97715ee06a5ebcfb48b296d2df5b10445022c4c453f250e65aedace22cb6728104d07dec55c648c72c5ed486d9a4f227076d49d21f458ed7731d0b52cab959f38bab097d41e825a7360f8840b0d8ff3e6f70e2b4b49c8bdaf162a0f9c5e1c9c452e1ea22a9b66df60e56cf1d7fd3dc200b5ba10a6c31a9daf7ec1528a1ef9bc5a549ec6606832e499b9d1e5ad5735e33d321565864a589e4b70313b83ec65b3c58cdd47ac79ee5d7ee73f867b12684dc2dc3d850e68e7eefb192746fa7854f374eab6c00145847561a25f323d59f2f6780547f4e45b33e19198a5cdd14f7741ce7ff8e81dec61e029539c3c79b09469783a2d2fb92a976db4b94032c32313acaa9fb4cad93cad0f5d60dbc650449734acac284dc73eaf6933f1eb0f88cac7f12c363eb6148f343cb540a0a99eaf8e3f841f9d64e9acb0ba1843ee75ebe69bfab790963c5975de7138c2e1e3b302455d96f1369f3a7fc0d5aafc47c20c9d90a60016a3283864addca780e0c4bfb3b1b30ddb5f7b436152f8cac33b9a239e65988dac69dba000d5ee440831f9354f9221165ebd751424d0a5a15c2d0966d4ea98e03e2805e450b1f49fabab469fcbfd9cb399418f1ff4372623287385f58019fc838175f75975e48c6a2418d4d7ddedb1a1b5c8bceb09b2f388c53dc1a1a78930db759183be5e1df466cc483ecd2cea641e6d4319d4cf742df2abb3f1957c131fbe6ef8d3333a7d893eac33715df1fbb061f9c89ac66d6dc9d6f652b1b3067b1c0242fc1e246b5391321473e47db14e127141ff3a4e69255a1916c6295f354341a4a3d0c55f87b1f33bc0324e858578e38c9594d06c90169dcbfa8c4dfcda72c26f362fffb53b822555fdf8d256769631a4f7391b2f4fec91622bb4b11e6d77482079b489a04707b40cef64ec4d395cbf4368c49595600b894dc7c0dd9bd9e72738bf6aaae8dae3fc3fff8d14254df513829198887f21c00d0be66d170de7ae8260707cb64114b89fa3dfddb4a6350ef9782f2359a18bf1db19afdf8675089a49cccb051f21c6d9708d0ee90dbaca9940c4391b83d443722d72a2321b48607a4d1da432d5b3f0bdcd7917fc0798a87bfb445e41d2c4f5e4a213308b4fe9984b57ac083a6f241008c7914ceeff8902edf97827bec11164fbddd8a50ddc1703159b1c09f28ffc2441effd08af1b057bc76c4b73a64b02c335fcd2518548836a745a9759d1a05223ce9995541b7bd8e98e4d3f59af0382806ecda74cae1004e3734a4a5573b939b1f4d3b6e8bae138160226da60d2059207f90e48c6b76a7d362a2fa6a5817670345aed06b1bfaa678208ed3aa0711bd2827c97fbb9f98e0cf50ee23a756aa53a993f8697e3ffdd522f9a0d22bd4a90b1a2e00060937f7dafe3a900b00f01c360c0a69c7b86ef7081ea578386f6a61751a279e99cdbcba0d2d591fe0e59cb449bed4d8b7e88d2399731d365f2fc39e9cbda234996c24f3694abfd8a8314903dfc48b40cfef8f5bff0fa2c20c4708e928d9cacb94555380d161eaf267d692a7643c3cae9624b975310cd0107ce6cd868523e15ab05ebddf972cc75eff788d7d9956d8035e6d79e9bf343ad2cf70989f6df560133be2aea15ca633dee401a75aa0d0af453b27f3038eca292ba21d8cebda547c6d5d96ef7ba1beccb06b55e74186c1da41acd677c0aac179bc57117b1381a68b24fd3b62b3fa19d2bf36e574fbf2dae8d5dccdee183bbd86e49afb2400acd337c11ee91568323755ec89dbf60fd6a2a123dd92fbb13ee612a37545970a551ff066d2a951bf3d848a15ebae166a7ee5daa528f3d8c99ba898ac943405c49ec945ca811dee46068c68f6fd39169476f8eb50c9331d8e6cef2d7f2e7943073083fcde9f57661075da97a255e2cbc7b153935d8e2883155727a89acb42a2ccbac0fc6388f5fa2fe3ce1f939b5f4451af6d34bbbf8b613b4b6c19c08e21571e68c2c319f6d4c14f31d962ee4e58df7e3fa8abc79bf3c554dde03bc2cd0b0a383d66dd7c67992a8ee8cf85525e6426932be8042336de8316968fbe9c608d6a31a792ac82b8185377bf16779f6dd800ee8d01e98f8177381cfce00b00371dbbd3cf5300875892d4c600c7569e097c8def06845901b41417e4a47fbcd97f8f2f2d9f9a5740019cf8ea859e613ae6c8d2cad15ed82efb48d6e711f06b3c94d3292c052b08636c2b41ee8ca132abbc7fcdddac676a9b40686c8397c9d83da1dd5bdf4d95bdffe3c5046a15298c0a5c91c54fa5a90ac1a8228920be9b58b55eeca70b8ddaa4cd9b942cecdb151cdcd0b112b70e60a77dc240cb4ef5e3c259474488f611d6e08f3d804f684ad0cefea6cd8e637835ae6a78716becaf8296e6445d96b0531b18d6337ae244502988bc4fa8bf1abfb1c8dfaebec37f40a65e050c13f2313334e85ced281213a9b66da1319d7887ed6b0dc8b8b05be23b2d24c4d1935471b425e8da09dd002c69c78ab8a2a539e3af99a49c8a7064cd38735b53e7624dc906dffc55702fbcf720f37cda3cd4429b7558bfa12429ff66b83f780d7ac4e7e75a3916c2eb53bf6e0fdd7e7ab17a53f969c7826e4faab63cd15b4154f324ef150ca5301df5f21bb83dab6a0bcfb636bec10a388949d03e85870a17da8f57d9c73de0faef17c096eb14a071a96de1d9f143f8be52a2a49c2b1c662ec2c3fb1b86270675b17e2e44ec4d50c70dbd14ea0d36ad7d6ccca130cc938abb4f04ef97f3f3518d3880f95ad21f6632a3c5c49193ce6bb389459e8f56ea3e69943b21fd4032ef280c0c7518866f60e4749741bbe7b06c3080b08fb92e872c13814834efef77aaaedf12b8e974c45ddd1ee25d6ec8e011b3a9324eee1be46b7782820200b87f797802206730b85a5760c68b9d7af3d7f5aef4d0843dd5ecf5313a4a39a61b5bf41acf537271941e4b85c35d02fff53081286ba2793af2987dde6597a66ba634b864dc5a962db92452fc5efb63fff56954a77f91c708f04dba437f3036ee5cd864fc09f11f531ed29a2071ec0ff61c10ea00e312b9f83f94a732115101e94cc028d862b031c60d4360192264b2677ec82cc7ce0d244c3d60b9698b3c722434b22f921853c032a05bdd08f70c7b4d90c573bcab6bd04238a2c2788259acd3a9cd3d284cce0ccff9161faa3d37e2437086bf3b6b8c91dec461b7262d15f5a185bfa17808a67a27dd06ccba96be64fb44c84c7718630aaf5dde63b11576a4ad936dae60bebf4d79b58f83ae64e20bc91e498d21cb3b4d9cd152d30780c93ca2a3749e352872e60e644eb5396ed89baa77af1aad397ebf62e9c580a7e0e88a7c95a95690b54350367ec3c2d4c7bce9d208614880e0913338152b0670e132db65904783180caa80927e577de67cad3bc72b5f833faaf284271d1af48792770404502793be098321e1ffc2e634ebeaa125e24860664fabc59026f23299a35a2c9f31433eb3a68545f9307dcb8ac9e5ba75437559c98c7a0906480972fc0d0060f66d067d8839edab62d3e53031f4caa4cf6033058f2e30db622ed86aa8d6a6a1e44602b99021d2dfd063287f31737d994d6b66885db130cd05cc621a1e8c1dd6f58a83ca1b42e1f3d2c339e510bc0ab7ab485b566b8728900fdf0b5b64c19b613a4837717371511e82e486bab57b99ed86407fd55f05679a9e15faa48ab9dd1b62d668e0a30762e78710a66b427fe1e30ead3960a4c6af7ff9994eb8ae012c12e3ecc6e3fa9ef81d97361d2065690abd119f34e5f13606e4818b9991467007d7890ebd9af78f710928ad232de4afe6e5554551fa1728919c4991beaeea16f3ff9ee7ec32a344dddfd51050b0788338197498d9730cac62f6a30c70a12c89623410fb11058d2adc584ae427dee58f7d144bcc001883b6f75a2812237bff634a5af2baa853dae037b93de1f66034240ca87c16772cd0c8512543d92d11f4d3fa7df03717077514ad3df640da22e0cc5e026855ec31975094f2cd4f5eeed09f712d67a1640d73d86d9310a0e9cb0a06bfe9abcb5374f5c8a588f885b0b179c58962b84e2d99a821a6108dbce8c662c2ff6d666286d1b1293eee661bdb6e996c297267ce0321628fe65f524b39ac3b6271cdcd7f00ffec26ba606d744cb1594902a3a0713e562c6c0708b69bc69fcff10b5a1f1f6d7ee3ae1965af3f209de9860fe3694de4b2d9abefe5acdcee4eef167cc51b97d8c7c1b5d0b7d9621c80d87cf81299adfc069dfaad4d53ecaf27b64df5dc5753134027737f62687162fadd7410b75536cc85fd09f5ba8bc15098720ffc964238655ae612021e0a2a1edcd411e324b69aae43abb678097094b48b4a88734ce1e27cd0e81cd0e4dc56e2a675758eb46e4ceed04f2194d31196663d5c35d41883edc75406bfe5bdaad612956ab23f9fcf77996c0ddf1728c06dc902526fa11d75cf828e9983c6a3ae8b94b24dc8febf4a2114bb99d7000370f12dd1c00d4c69e9995846692213942e28e0be3a1cfac64c3b9810f8c0687a85235aca9548a198a01b8a251f8c2ecf88fc3c55550d3d1d89cab00533a2eac9eda7c75cf4240645f0675814847cad6c247863a2909bbbcc0c612c1787a9e73398a703bb1ab4e0836db68e6fcfbd88bc2a267c7637e610054568cea434e1e95f2fa9b0d14aebc6cc6421e4cf2390a66b2dcf791409dd170deb89b7cdeb5cc120114c755c1cf95819110c4013e6b82dc73427c1195695f47e66c521b4b8ff22f5c58438f1af0606137e45d641728a413ef48e7f160fd2612fdf8d2e903b1f4e2321e0dfeb12f906adf960c73064a9fcccecb91bb26035f597ee672688241ad31fb4f3cf67203a3d3f4a33c7473311fabaa419630543b66d9826f054625cef465d64442c67f02c6364052ab925129127bc11c7d62a3d6cb1902962e595255af796996814d333c2a5a2c0a10c7bb58e3999bb71d1c963e88d17e12216f94a05da8ba7e3699a01bd8af7aa465203efd108a018749c46ab4954d6bbedff3cee4e890958aa19e7b5f45f083d1667e94fd09c14ed5804d96778e51b922d2f163234196fe3a6fb92a2ea01ce64e6036a6b3878cb550c6bf290435d9351fb88dd3d75afc0bde6bb3a8f7dacd3bd9e4f170d77ccc3b81f928339a84f974bdc68facc2a5a4c88d5c994d5c080a165fc647ced52fbb1bb94f8f840dbefdabd21e3cd823eff396f05f508a3a2c6f64f44e1df75ae1098881a702b62dd5e87d0b671776af702512bc7b0d3f3880bc49dc268087f32b503dc5161b060756722124571ab63afacf67724b23796984695ad0312c4188e64ae44820025692b91b5158d7611458db3eada377ae374e1e18a2eb964a1a3136cbb0a5b9b897015fb4a7832d86d734f5fd2211afefad1a034f2a1a6ffb1a269bfcd7526ec41c0e5bf0a81c5e488aa7d485a1352b27af1310bcb2493ad203927798dc9506180d258b03b8869bb7e50752b488dacdd42317a2fc16ecceacb8d26ae52cac8820325a36f65ca0e31c65f32f00a7725b73290c0ee372da5ba23cd48db634d9f0cc79097e29ed06699721c00bcb76ddab806bcc4ecc785cb323242609bbae890ceffd08d97eb74d724b2d3412b805ae085629b344286552c6d8eb97083102c49ef0c31475b0d1dbb9f2aa1636f04ee7e3f028326aeafcbd43259fd215045ab5632573913e9539bb7a13e1a07960109680788dda581a8d5eda3e312a234a7c4500111ab202e2572b4973c578d4ade9ee37f5b9adbe77b508da0fa2df9c6ec4c14e0191ca2a43a58407f64e41d0037b269187a587621d56745b5f490fa35bdbe8e1df106979f9c5e5454c74c1f04cbac80bef3edd2efa9d2e97adb8e4c3466b3db0d4f1bd3f67d1da6e378577a806d499a85249fafc8e7faaa83429b6708000af038dfa96e977def1fe8e536f64aa79a106cc9d399efc388c48480c063c030500595fdd636371dde3ff275b41cac2954501583f202b07d9bdb98b04f01f52e99049a22d05a5cd1f1c67f25c53fa18f09d0ed99d47b0b7865c000d4651d5cbb8c9746b7853c7a2948564c2befa566472df96209d7baccc89da957d5b5e4576f470196b531270b62c51e1fd57672908f189796129fc8733ee33ebb3590b2b7f505399d551785595b6c9b5913007bc46db9918b990be3973c82176ec9b672e9f2e47747d5bb5e8dc6010b6b43baacda764ec23ea544825178547cd29f43ec3113cab66276d1914791d4444a70fab9d3ec1d62c0e931f4c92af273fdc5405d8310b0fcfe434bb84f358ab7f310d23b56ef8f59ee70ffa5ec8cf5618556f333e4592249d9fc804b4e69c88613ccee95ed842e515396e8342f948d2ce19b9ad30e6a41fd41f8be9a57ac545094247d51da50d13d47f25e8c27369cd4ea02042dbf58da7c5884089758d3ca33f4c537554993d8a8af264f1cbdf3df2b66422fbf40c831806f83e58e74470054d7d2f307eb67a9bc7180fbad86bfe1e48d3a67a6328f208dc691ca47da56ac33c11d727d0c620e45139647e278afcbfa451566dc4fc218b34e962af7129c74436e0195b3114bef6c53d12db51feab9cfdec3154789eedbfba6ba28f5bcb18d479f2e73f08aaf96d05bd6259619861d5bda258003d8bc17356a7965ef0de1c7ad03e3147a4a4acfbcb53ec43418af401326c22a1c76924c3fc89f6993f9510658e5c64e407ffa71139a680fe953cd76ce98b10b310d7d076ae059b161481adeac17363de044f527a8bb9b9f858142ec4765810a8e3295545b1048c9c11da60facf47b9b5f82e6e06569cb3f758b4d55cfaa239c8bd6468950b9035455ba06108ae93ab3c8d3249eb0671755a7d61f3223582b844d987dbcefb1b8faed9544196c874e96c5e002561a590270a776cdfb5c8c70ef6d4de081d3f2807680884afdbf41c1092a6b0e681d2b3a80a89a9cd7a247f0de8e9817d5d353e95e42abb3b5e946e8b78a66a01150354edbb99fe108a91fc4b9ea1b55c0aefe31cf33e5bb2eaedeea5420523e61d6fd0845454717fe96980f0861efeeccd0b63b0f83fe4472a5d4eb4500fec1772df875dfb02233ef1aa9726a52da468ff53c910750e05c4135549220ddc3c9bec5e1b5eb75900f2f87c7516f6e8ab7ddabde8215ba49ae0cc902060d3b648971150359e3964190bd3634a08ecfd14568e6828fe2bd21b99698f8822787ef4a5703fc8860cbb71d5249bf6c0cdb87ff544d8749cff61881254875529d281c6484c6087c89291edee33b394587e18dd09d406464ffaaa26277040f8ab93ffa33dabebb9f40cdee9b4522861fd6d4db0f68df237c4c0eae989621b8bc0df7d8ae8e297d1ebae2c7170a1a8b91f2c640258727f7bbc6d175a1a6d7600c272c76232a4e8139fca06c1f923a343518690396243ad065fc6cbe85a45f79505d805040246a38c1a1a902836dfbc96b009fa8b6b9bda485fc6f3e639afb2c77bb6e7d8b79eeea244e9e3a29b7927b368a4b554fc5d9b8cb0cf668a8db024b0e2507d341d848bdcaa654695feefddc2f80bb9bc88b27a20d8116599e7388f34d5e7ec2ca6eb29606fe88195cc0e0e4f0522b77ef42bb07bd945784ffd11e6a350cf4fbebd135e4dbdff66ef93e39317614b51b4bed5ad6a08597ce90a575f3ffb6205abd4939fc03ab7c93c1b3065df8f7b1059ea33158e3f5c16947183884cf219009ef0af8dcc4cbbcd6a7cee77ef90befe0590e92d491c0b3378805baf77a1892c3a5ee96521eb9a2614171d2e8696f3e33140507723792190b9116fc6a49852415df1aec4eb42d21d7dde9ecfb109fcba87656ac1e97f94efd4a4b58b56065aaf92cdcda2019dbab99190cef32ec48260bfc01cab53b82a04c2b196ed380f38ed6e451df07fa8e131326b46637f18e6a9ad0c9210aa8a5b9b067720deb0bc63640fbe11d8a3b33ef8cc7722a7b2ecab876c059f22784534495b943bd3d0d16b074f91b3816a70060419e20c7f41ce4ce8272317ebc32b589054732d61d05334bde8e849027ea14958514792f11c94e4c57f6766d3c8d0d133f130902fd4e10a61f8e5393fc8dc19c2d433b080b812fa8f83c264ad9fdd6c599f987d1e4949bab9329e5a9b7ff393d0f74a9264a66ff0c29037dcb17452afe65b5f2cce261a553e8a9a7c31226e02af8ceaf1fab74150909033fff9a2b612aa179b483d3eb1f89b30a3d672cea418783e5e41c320e12a331e672527fdd33b8ca2fae6a35f09803e52fd101a5905bb375fe3d513bf2a8e936d8652698af43f821eadf28911f7c99db2291a3c0a627ca3d3f7430d356e5526f6f04fcf109c9726ba8b927839772c7c5e7cf1a0ad8e8f86ed2cbfe57da5853859f85e17464cae3c6fa882455d66ff13706678a4e6a60c4e5e6134df1fb36ad6e8b6cc27c1f14b5d5fb963ba7f678239e93526dd168fa52bdf24c796a9fe3a9d95c9d385bb743d856098c6628629b4b68a0c2bd94f072861a69c1a615c6912abe865dd7b2ab7480aa5830f2dae84acd52f3148a2296d923b6c5e0716d43fce3e2fcb5fd6767f2715a9c954551aa3eed86e71c44f8529b1afdfbde50b69f983701b0ca8117dabc9c2f40780b9d7ef79afb8eb0407796dfb3092f789dc519ed95c31db59d8038d35d111b9d741c4909b2df321d4c642605dda2fd6b049926f2d1bb8f862a39e89b4a11580318ee58a23de4a6a79a0c07c19f8bb8bc485fc5c360f97bbc3344ba06d9f56a8b379301741310c3e9e5927d20aae8b62673b5a71dfa4224b4f1d1058ba447695c8ec73a41b4be</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码：</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>目标检测算法综述</title>
      <link href="/2022/01/04/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E7%AE%97%E6%B3%95%E7%BB%BC%E8%BF%B0/"/>
      <url>/2022/01/04/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E7%AE%97%E6%B3%95%E7%BB%BC%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="目标检测算法发展历程">目标检测算法发展历程</h2><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/目标检测算法发展历程.png" alt="目标检测算法发展历程图">&emsp;2012年之前，都是传统的目标检测算法，传统的目标检测算法采用类似穷举的滑动窗口方式或图像分割技术来生成大量的候选区域，然后对每一个候选区域提取图像特征(包括HOG、SIFT、 Haar等)，并将这些特征传递给一个分类器(如 SVM、Adaboost和 Ｒandom Forest等) 用来判断该候选区域的类别．由于传统方法提取的特征存在局限性，产生候选区域的方法需要大量的计算开销，检测的精度和速度远远达不到实际应用的要求这使得传统目标检测技术研究陷入了瓶颈。&emsp;2012年后，将深度学习应用在目标检测领域，检测的速度和准确度有个飞速的进步，目标检测开始进去发展的新时期。<h2 id="R-CNN">R-CNN</h2><p><em><a href="https://sci-hub.se/10.1109/cvpr.2014.81">（原论文）</a></em></p><p>  2014 年，Girshick 等人成功将卷积神经网络 ( Convolutional Neural Networks，CNN) 运用在目标检测领域中，提出了Ｒ-CNN 算法，它将 AlexNet与选择性搜索( selective search)算法相结合，把目标检测任务分解为若干个独立的步骤。</p><h3 id="基本步骤">基本步骤</h3><ul><li>输入图像，利用SS算法在图片中找到2000个候选区域</li><li>将2000个候选区域进行大小变换，得到固定尺寸227x227，然后输入到神经网络中，进行区域特征提取</li><li>经过20个类别的SVM分类器，对于2000个候选区域进行判断，得到类别信息</li><li>对候选区域做NMS，去除不好的，重叠度高的一些候选区域</li><li>修正候选区域<br><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/R-CNN流程图.png" alt="R-CNN流程图"></li></ul><h3 id="部分概念">部分概念</h3><p>(1)IoU<br> 简单理解就是交并比，即：两个候选框的交集/并集。取值在0和1之间。<br>(2)NMS<br> 非极大值抑制（Non-Maximum Suppression，NMS），顾名思义就是抑制不是极大值的元素，用于目标检测中，就是提取置信度高的目标检测框，而抑制置信度低的误检框。<br>它的基本步骤是:<br>  1.寻找得分最高的候选框；<br>  2.计算其他候选框与该候选框的IoU值；<br>  3.删除所有IoU值中大于给定阈值的候选框。<br> IoU值大，说明这两个候选框重叠部分多，说明这两个候选框选定的是同一个目标，所以要删掉得分较低的候选框。</p><h3 id="优缺点">优缺点</h3><p>优点：<br> 使目标检测的精度得到了质的改变，是将深度学习应用到目标检测领域的里程碑之 作，同时也奠定了基于深度学习的双阶段目标检测算法的基础。<br>缺点：<br> 选出的区域多数都是互相重叠，重叠部分会被多次重复提取特征，导致重复计算，比较耗时。</p><h2 id="SPP-Net">SPP-Net</h2><p><em><a href="https://arxiv.org/abs/1406.4729">原论文</a></em></p><p>2014 年 He 等人提出了空间金字塔网络( Spatial Pyramid Pooling Network，SPP-Net) 检测算法，它在 CNN 最后一层卷积层和全连接层之间加入 SPP 层，使得网络能够输入任意尺度的候选区域，从而每张输入图片只需一次 CNN 运算，就能得到所有候选区域的特征，这使得计算量大大减少。</p><h3 id="基本步骤-2">基本步骤</h3><ul><li>图片输入网络，得到全图的feature map；</li><li>原图经过SS算法得到的候选区域直接映射全图的feature map，得到每个候选区域的特征向量；</li><li>映射出来的候选区域的特征向量经过SSP层，输出固定大小的特征向量给全连接层<br><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/SPP-Net.png" alt="SPP-Net流程图"></li></ul><h3 id="优缺点-2">优缺点</h3><p>优点:<br>  引入了空间金字塔，适应各种不同尺寸的特征图；<br>  对整张图进行一次特征提取，加速运算速度，并提出了权重共享的策略。<br>缺点：<br>  分类器使用SVM，训练依然过慢，效率低；<br>  进行分阶段训练，训练步骤复杂。</p><h2 id="Fast-R-CNN">Fast R-CNN</h2><p><em><a href="https://arxiv.org/abs/1504.08083">原论文</a></em></p><p>2015 年,Girshick 等人提出了Fast Ｒ-CNN算法,他们受到SPP-Net算法的启发,将SPP层简化成单尺度的ＲOI Pooling 层以统一候选区域特征的大小,而且进一步提出了多任务损失函数思想,将分类损失和边界框回归损失统一训练学习,使得分类和定位任务不仅可以共享卷积特征,还可以相互促进提升检测效果。</p><h3 id="基本步骤-3">基本步骤</h3><ul><li>一张图片经过SS算法生成2k个候选区域</li><li>整个图像输入卷积神经网络得到整个图像的feature map，将SS算法得到的候选框映射到feature map上得到每个候选区域的特征向量</li><li>每个特征矩阵通过RoI pooling层缩放到7x7大小的特征图，接着展平特征图送入到一系列的全连接层。</li></ul><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/Fast R-CNN.png" alt="Fast R-CNN" style="zoom: 67%;" /><h3 id="优缺点-3">优缺点</h3><p>优点：</p><ul><li>使用Softmax去代替SVM进行多分类的预测，从而实现了端到端的训练；</li><li>引入ROI pooling，速度更快<br>缺点：</li><li>依然需要SS算法产生候选区域，速度慢。</li></ul><h2 id="Faster-R-CNN">Faster R-CNN</h2><p><em><a href="https://proceedings.neurips.cc/paper/2015/file/14bfa6bb14875e45bba028a21ed38046-Paper.pdf">原论文</a></em></p><p>2015年Ｒen等人提出了 Faster Ｒ-CNN 算法框架 ,设计了辅助生成样本的ＲPN 取代选择性搜索算法。ＲPN是一种全卷积神经网络 (FCN) 结构,它将任意大小的特征图作为输入,经过卷积操作后产生一系列可能包含目标的候选区域,使算法实现了端到端的训练。</p><h3 id="基本步骤-4">基本步骤</h3><ul><li>整张图像输入网络得到特征图feature map；</li><li>使用RPN结构生成候选框，将RPN后生成的候选框映射到特征图上得到每个候选框的特征矩阵；</li><li>将每个特征矩阵通过RoI pooling，得到7x7大小的特征图，接着展平特征图，通过一系列的全连接层得到预测结果</li></ul><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/Faster R-CNN.png" style="zoom: 67%;" /><h3 id="优缺点-4">优缺点</h3><p>优点：</p><ul><li>ＲPN 的使用，使Faster Ｒ-CNN 能够将网络中区域建议、特征提取、分类及定位多个步骤整合到一起，真正成为端到端的训练。</li></ul><p>缺点：</p><ul><li>Faster Ｒ-CNN特征图上的一个锚点框对应于原图中一块较大区域，因此，Faster Ｒ-CNN对小目标检测效果不是很好。</li></ul><h2 id="YOLO">YOLO</h2><p><em><a href="https://arxiv.org/pdf/1506.02640.pdf">原论文</a></em></p><p>2015年Redmon等人提出了YOLO算法，将分类、定位、检测功能融合在一个网络当中，输入图像只需要经过一次网络计算，就可以直接得到图像中目标的边界框和类别概率。</p><h3 id="基本步骤-5">基本步骤</h3><ul><li>一幅图片分成s*s个网格（grid cell），如果某个目标的中心点落在某个网格里，那么该网络负责预测该物体。</li><li>每个网格预测B个bounding box，每个bbox除了要预测bbox的位置外，还要预测一个置信度（confidence）的值每个网格还要预测c个类别的分数。</li></ul><p>原论文里，s = 7，B = 2，c = 20</p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/yolov1流程.png" alt="yolov1流程" style="zoom:67%;" /><h3 id="网络结构">网络结构</h3><p>整体结构：</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/YOLOv1.png" alt="YOLOv1"></p><p>最终输出7x7x30的张量的结构图为：</p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220104190735017.png" alt="image-20220104190735017" style="zoom: 50%;" /><p>其中7为最初每张图片分成7x7个网格。每个bounding box预测四个位置信息，一个置信度信息，一个网格预测两个bounding box，所以，一个网格包含十个特征信息。又因为共预测20类目标，所以还有二十个类别信息，因此，一共20+10=30个信息。</p><h3 id="优缺点-5">优缺点</h3><p>优点：</p><ul><li>Yolo采用一个CNN网络来实现检测，是单阶段检测框架，所以Yolo算法比较简洁且速度快。</li><li>由于Yolo是对整张图片做卷积，所以其在检测目标有更大的视野，它不容易对背景误判。</li></ul><p>缺点：</p><ul><li>虽然每个格子可以预测B个bounding box，但是最终只选择只选择IOU最高的bounding box作为物体检测输出，即每个格子最多只预测出一个物体。当物体占画面比例较小，或每个格子包含多个物体，但却只能检测出其中一个。这是YOLO方法的一个缺陷。</li></ul><h3 id="YOLO的演变">YOLO的演变</h3><p>为了克服 YOLO v1 检测速度快，但检测精度低的问题， YOLO v2算法引入BN ( batch normalization) 、多尺度训练、锚框机制和细粒度特征等方法对YOLO v1 算法进行改进。YOLO v3算法在YOLO v2 的基础上，采用更好的主干网络、多尺度预测和 9 个锚框进行检测，使得检测算法在保证实时性的同时，精度提高。近几年又发展出了yolo v4，yolo v5网络。</p><h2 id="SSD">SSD</h2><p><em><a href="https://arxiv.org/pdf/1512.02325.pdf">原论文</a></em></p><p>2016 年 Liu 等人提出了 SSD 算法，在回归思想的基础上，有效结合多尺度检测的思想，提取多个不同尺度的特征图进行检测，遵循较大的特征图用来检测相对较小的目标，较小的特征图检测较大目标的策略，显著提高了对大目标的检测效果，对小目标检测也有一定的提升。</p><h3 id="基本步骤-6">基本步骤</h3><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220104191429817.png" alt="image-20220104191429817"></p><p>VGG-16模型：</p><p><img src="https://wshuai-pic.oss-cn-beijing.aliyuncs.com/blog-pic/image-20220104191707498.png" alt="image-20220104191707498"></p><h3 id="优缺点-6">优缺点</h3><p>优点：</p><ul><li>将不同层次的特征图进行融合，提升了速度和检测精度。</li></ul><p>缺点：</p><ul><li>但 SSD 算法提取的不同卷积层特征独立输入各自的检测分支，容易出现同一个物体被不同大小的边界框同时检测出来的情况，即重复检测问题。而 且每层的检测分支仅关注自己分支上特定尺度的目标，没有考虑到 不同层、不同尺度目标间的关联性，所以对小目标检测效果一般。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
          <category> 目标检测 </category>
          
          <category> 综述 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
            <tag> 目标检测 </tag>
            
            <tag> 综述 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
